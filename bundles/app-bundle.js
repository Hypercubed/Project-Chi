System.registerDynamic("components/app.css!github:systemjs/plugin-css@0.1.30/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.register("components/fantom5/index.js",["common/styles/index.css!"],function(_export,_context){"use strict";function controller(dataService){this.dataPackage.resources.forEach(function(resource){dataService.normalizePackage(resource.url,resource.data)})}return{setters:[function(_commonStylesIndexCss){}],execute:function(){controller.$inject=["dataService"],_export("default",{controller:controller,templateUrl:"components/fantom5/index.html",bindings:{dataPackage:"<package"}})}}}),System.registerDynamic("components/fantom5/Lizio_et_al_2015/timeCourse.css!github:systemjs/plugin-css@0.1.30/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.register("components/fantom5/Lizio_et_al_2015/timeCourse-chart.js",["_F","d3-svg-legend"],function(_export,_context){"use strict";function SeriesChart(){function chart(selection){selection.each(function(_data){var series=_series(_data[0]),nestedData=d3.nest().key(_name).key(_time).sortValues(_sort).entries(_data),xValues=[];nestedData.forEach(function(d){var times=d.values.map(function(d){return d[_timePoint.key]=_timePoint(d.values[0]).trim(),d[_time.key]=_time(d.values[0]),d[_time.key]});d.id=_id(d.values[0].values[0]),d.species=_species(d.values[0].values[0]),d.timeRange=d3.extent(times),xValues=xValues.concat(times)}),nestedData=nestedData.sort(timeRangeSort),height=dy*nestedData.length;var svg=d3.select(this).append("svg").attr("title",series).attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");svg.append("g").append("text").attr("dy",-0).attr("dx",width/2).style("text-anchor","middle").attr("class","title").text(series);var xScale,xExtent=d3.extent(_data,_time),xMax=xExtent[1],xUnit="mins",xUnitScale=1,xAxis=d3.svg.axis();"Early response"===series?(xScale=d3.scale.log().clamp(!0).domain([1,xMax]).range([0,width]),xValues.push(1e3,1e4),xValues=xValues.sort(d3.ascending),xAxis.scale(xScale).tickValues(xValues).tickFormat(function(d){return 0===d?"0:00":d<60?"0:"+d:(d=d3.round(d/60,2),1===d?d+"hr":d<=5?d%1===0?d:"":d<=5?d%1===0?d:"":d<72?d%12===0?d:"":(d/=24,4===d?d+"days":28===d?d+"days":d%2===0?d:""))})):"Development"===series?(xUnitScale=1/60/24,xUnit="days",xScale=d3.scale.linear().domain(xExtent).range([0,width]),xAxis.scale(xScale).tickValues(xValues).tickFormat(function(d,i){var v=d3.round(d*xUnitScale,2);return v<0?i%2===0?"E"+(v+20):"":"N"+v})):(xMax>100&&(xUnitScale=1/60,xUnit="hrs"),xMax>1e4&&(xUnitScale=1/60/24,xUnit="days"),xScale=d3.scale.linear().domain([0,xMax]).range([0,width]),xAxis.scale(xScale).tickValues(xValues).tickFormat(function(d){var v=d3.round(d*xUnitScale,2);return d===xMax?v+xUnit:v%2!==0?"":v})),svg.append("g").attr("transform","translate(0,"+(height+margin.bottom/2)+")").call(xAxis);var gSample=svg.selectAll(".sample").data(nestedData).enter().append("g").attr("transform",function(d,i){return"translate(0,"+dy*i+")"}).attr("class",function(d){return"sample "+_species(d.values[0].values[0])});gSample.append("a").attr("xlink:href",_timeCourseUrl).attr("class","sample-name").append("text").style("text-anchor","end").attr("dy",dy).attr("dx",-10).text(_key),gSample.append("g").attr("transform",function(){return"translate(0,"+dy+")"}),gSample.append("line").attr("class","sample-axis").attr("y1",dy).attr("y2",dy).attr("x2",width),gSample.append("line").attr("class","sample-range").attr("y1",dy).attr("y2",dy).attr("x1",function(d){return xScale(d.timeRange[0])}).attr("x2",function(d){return xScale(d.timeRange[1])}).style("stroke",function(d){return color(_species(d.values[0].values[0]))});var times=gSample.selectAll(".point").data(_values).enter().append("g").attr("class",function(d){return"point "+_species(d)}),points=times.selectAll("a").data(_values).enter().append("a").attr("xlink:href",_sampleUrl).append("circle").attr("r",r).attr("cx",function(d){return xScale(+_time(d))}).attr("cy",function(d,i){return dy-i*ddy}).style("fill",function(d){return color(_species(d))});points.append("title").text(function(d){return _sample(d)+" "+_donor(d)+" @"+d["Time Desc"]}),times.on("mouseenter",function(d){var N=d.values.length-1,duration=300;d3.select(this).selectAll("circle").transition().duration(duration).attr("r",1.5*r).attr("cy",function(d,i){return dy-2.5*(N-i)*r})}),times.on("mouseleave",function(){d3.select(this).selectAll("circle").transition().duration(500).attr("r",r).attr("cy",function(d,i){return dy-i*ddy})})})}var width=500,dy=20,r=3.5,ddy=0,height=900,margin={top:0,right:200,bottom:40,left:200},color=d3.scale.category10();return chart.color=function(_){return arguments.length<1?color:(color=_,chart)},chart.width=function(_){return arguments.length<1?width:(width=_,chart)},chart.margin=function(_){return arguments.length<1?margin:(margin=_,chart)},chart}function drawChart(data){var nestedData=d3.nest().key(_series).sortKeys(d3.ascending).entries(data),color=d3.scale.category10().domain(["Human","Mouse"]),width=800,seriesChart=(new SeriesChart).color(color).width(width).margin({top:60,right:200,bottom:40,left:200}),charts=d3.select(this).selectAll(".series").data(nestedData).enter().append("div").attr("class","series");charts.append("div").datum(_values).call(seriesChart);var svg=d3.select("svg");svg.append("g").attr("class","legendOrdinal").attr("transform","translate("+(width+230)+",35)");var legendOrdinal=d3.legend.color().shapePadding(10).scale(color).shapeWidth(20).shapeHeight(20);legendOrdinal.on("cellover",function(d){d3.selectAll("svg").classed("hover hover-"+d,!0)}),legendOrdinal.on("cellout",function(d){d3.selectAll("svg").classed("hover hover-"+d,!1)}),svg.select(".legendOrdinal").call(legendOrdinal)}var _F,d3,URL,_series,_sample,_name,_id,_time,_timePoint,_species,_donor,_key,_values,_timeSort,_donorSort,timeRangeSort,_sort,_timeCourseUrl,_sampleUrl;return _export("drawChart",drawChart),{setters:[function(_F2){_F=_F2.default},function(_d3SvgLegend){d3=_d3SvgLegend.default}],execute:function(){URL="http://fantom.gsc.riken.jp/5/sstar/",_series=_F("Series"),_sample=_F("Sample"),_name=_F("Time Course"),_id=_F("Time Course Id"),_time=_F("Time",Number),_timePoint=_F("Time Desc"),_species=_F("Species"),_donor=_F("Donor"),_key=_F("key"),_values=_F("values"),_timeSort=_time.order().asc,_donorSort=_donor.order().desc,timeRangeSort=_F("timeRange.1").order(d3.descending),_sort=function(a,b){return _timeSort(a,b)||_donorSort(a,b)},_timeCourseUrl=function(d){return URL+d.id},_sampleUrl=function(d){return URL+"FF:"+_sample(d)}}}}),System.register("components/fantom5/Lizio_et_al_2015/timeCourse.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","./timeCourse.css!","./timeCourse-chart"],function(_export,_context){"use strict";var _classCallCheck,_createClass,drawChart,controller;return{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0012BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0012BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0012BabelHelpersCreateClassJs.default},function(_timeCourseCss){},function(_timeCourseChart){drawChart=_timeCourseChart.drawChart}],execute:function(){controller=function(){function controller(){var _this=this;_classCallCheck(this,controller),this.editorOptions={data:this.dataPackage,enableOpen:!1,enableProtected:!0,onChange:function(){return _this.change()}}}return _createClass(controller,[{key:"change",value:function(){var data=this.dataPackage.resources.filter(function(d){return!!d.data}).map(function(d){return d.data}),container=d3.select("#_fantom5_Lizio_et_al_2015__chart");container.selectAll("div").remove();var divs=container.selectAll("div").data(data);divs.enter().append("div"),divs.each(drawChart)}},{key:"$onInit",value:function(){this.change()}}]),controller}(),_export("default",{controller:controller,templateUrl:"components/fantom5/Lizio_et_al_2015/timeCourse.html",bindings:{dataPackage:"<package"}})}}}),System.registerDynamic("components/fantom5/Motakis_et_al_2013/scatter.css!github:systemjs/plugin-css@0.1.30/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.register("components/fantom5/Motakis_et_al_2013/d3-scatter.js",["d3-svg-legend","d3-tip","d3-tip/examples/example-styles.css!"],function(_export,_context){"use strict";var d3,d3Tip,DEBUG,riken,defaults;return{setters:[function(_d3SvgLegend){d3=_d3SvgLegend.default},function(_d3Tip){d3Tip=_d3Tip.default},function(_d3TipExamplesExampleStylesCss){}],execute:function(){DEBUG=!1,riken={charts:{}},riken.debug=function(_){return arguments.length?(DEBUG=_,DEBUG&&console.log("In debugging mode."),window.riken):DEBUG},riken.debug(!1),defaults={animated:!0,showLegend:!0,showTooltips:!0,margin:{top:20,right:20,bottom:20,left:20},width:900,height:500,tooltipStyle:{position:"absolute","z-index":10,visibility:"hidden",color:"white","font-size":"14px",background:"rgba(0, 0, 0, 0.5)",padding:"5px 10px 5px 10px","-moz-border-radius":"5px 5px","border-radius":"5px 5px"}},riken.charts.scatterChart=function(){function chart(selection){selection.each(function(data){function Trans(){xScale.domain(d3.extent(data,getX)).nice(),yScale.domain(d3.extent(data,getY)).nice(),xText.text(xComp[xi]),yText.text(yComp[yi]),svg.select(".x").transition().duration(750).call(xAxis),svg.select(".y").transition().duration(750).call(yAxis),(animated?dots.transition().duration(750):dots).attr("transform",getTransform)}var client=d3.select(this);client.style("position","relative"),DEBUG&&console.log("Processing data..."),data.forEach(function(d){xComp.forEach(function(c){d[c]=+d[c]}),yComp.forEach(function(c){d[c]=+d[c]})});var cWidth=width,cHeight=height;this.clientWidth&&this.clientHeight&&(DEBUG&&console.log("client width"),cWidth=this.clientWidth,cHeight=this.clientHeight,width=cWidth-margin.right-margin.left,height=cHeight-margin.top-margin.bottom,xScale=d3.scale.linear().range([0,width]),yScale=d3.scale.linear().range([height,0])),xScale.domain(d3.extent(data,getX)).nice(),yScale.domain(d3.extent(data,getY)).nice(),DEBUG&&console.log("Drawing scatterplot...");var xAxis=d3.svg.axis().scale(xScale).orient("bottom"),yAxis=d3.svg.axis().scale(yScale).orient("left"),svg=client.append("svg").attr("title",title).attr("width",width+margin.right).attr("height",height+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),xAxis_=svg.append("g").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis),xText=xAxis_.append("text").attr("class","label").attr("x",width).attr("y",-6).style("text-anchor","end").text(xComp[xi]),yAxis_=svg.append("g").attr("class","y axis").call(yAxis),yText=yAxis_.append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(yComp[yi]);xComp.length>0&&xAxis_.on("click",function(){xi=xi<xComp.length-1?++xi:0,Trans()}),yComp.length>0&&yAxis_.on("click",function(){yi=yi<yComp.length-1?++yi:0,Trans()});var dots=svg.selectAll(".dot").data(data).enter().append("path").attr("class","dot").attr("transform",getTransform).attr("d",getSymbol).style("fill",getColor).style("stroke","#000").style("fill-opacity",0).style("stroke-opacity",0);if((animated?dots.transition().duration(750).delay(function(d,i){return 30*i}):dots).style("fill-opacity",1).style("stroke-opacity",1),showTooltips&&(svg.call(tooltips),dots.on("mouseover",tooltips.show).on("mouseout",tooltips.hide)),showLegend){var symbolScale=d3.scale.ordinal().domain(shapeScale.domain()).range(shapeScale.domain().map(function(d){return d3.svg.symbol().type(shapeScale(d))(d)}));svg.append("g").attr("class","legendOrdinal").attr("transform","translate("+width+",0)");var legendOrdinal=d3.legend.symbol().scale(symbolScale).shapePadding(0),legend=svg.select(".legendOrdinal").call(legendOrdinal);legend.selectAll(".swatch").classed("dot",!0).attr("fill",colorScale)}})}var width=defaults.width,height=defaults.height,xScale=d3.scale.linear().range([0,width]),yScale=d3.scale.linear().range([height,0]),colors=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],shapes=["circle","cross","diamond","square","triangle-down","triangle-up"],colorScale=d3.scale.ordinal().range(colors),shapeScale=d3.scale.ordinal().range(shapes),margin={top:20,right:20,bottom:20,left:20},animated=!0,cellSize=10,showLegend=defaults.showLegend,showTooltips=defaults.showTooltips,title="Scatter Plot",valueFormat=d3.format(".04f"),tooltipHtml=function(d){return getId(d)+xComp.map(function(c){return"<br />"+c+": "+valueFormat(d[c])}).join("")},getX=function(d){return d[xComp[xi]]},getY=function(d){return d[yComp[yi]]},getScaleX=function(d,i){return xScale(getX(d,i))},getScaleY=function(d,i){return yScale(getY(d,i))},getTransform=function(d,i){return"translate("+getScaleX(d,i)+","+getScaleY(d,i)+")"},getId=function(d,i){return d.id},getColor=function(d,i){return colorScale(getId(d))},getShape=function(d,i){return shapeScale(getId(d))},getSymbol=function(d,i){return d3.svg.symbol().type(getShape(d))(d)},tooltips=d3Tip().attr("class","d3-tip").html(tooltipHtml).offset([-10,0]),xComp=["x"],yComp=["y"],xi=0,yi=0;return chart.margin=function(_){return arguments.length?(margin.top="undefined"!=typeof _.top?_.top:margin.top,margin.right="undefined"!=typeof _.right?_.right:margin.right,margin.bottom="undefined"!=typeof _.bottom?_.bottom:margin.bottom,margin.left="undefined"!=typeof _.left?_.left:margin.left,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.cellSize=function(_){return arguments.length?(cellSize=_,chart):cellSize},chart.animated=function(_){return arguments.length?(animated=_,chart):animated},chart.showLegend=function(_){return arguments.length?(showLegend=_,chart):showLegend},chart.valueFormat=function(_){return arguments.length?(valueFormat=_,chart):valueFormat},chart.id=function(_){return arguments.length?(getId=d3.functor(_),chart):getId},chart.x=function(_){return arguments.length?(getX=d3.functor(_),chart):getX},chart.y=function(_){return arguments.length?(getY=d3.functor(_),chart):getY},chart.xComp=function(_){return arguments.length?(xComp=_,chart):xComp},chart.yComp=function(_){return arguments.length?(yComp=_,chart):yComp},chart.xIndex=function(_){return arguments.length?(xi=_,chart):xi},chart.yIndex=function(_){return arguments.length?(yi=_,chart):yi},chart.colors=function(_){return arguments.length?(colors=_,colorScale.range(colors),chart):colors},chart.shapes=function(_){return arguments.length?(shapes=_,shapeScale.range(shapes),chart):shapes},chart.tooltips=tooltips,chart},_export("default",riken)}}}),System.register("components/fantom5/Motakis_et_al_2013/scatter2.js",["d3","./d3-scatter"],function(_export,_context){"use strict";function onLoad(data){var keys=d3.map(data[0]).keys();keys.shift();var colors=["red","green","green","black","blue","yellow","yellow","green","red","blue","blue","black","yellow","black","black","red","blue","yellow","black","black","red","red","red","darkred"],shapes=["triangle-down","circle","triangle-up","triangle-down","diamond","square","diamond","diamond","diamond","triangle-up","square","cross","circle","triangle-up","diamond","cross","circle","triangle-up","square","circle","triangle-up","square","circle","circle"],chart=scatter.charts.scatterChart().margin({top:20,right:180,bottom:40,left:40}).id(function(d){return d.sample}).xComp(keys).yComp(keys).yIndex(1).colors(colors).shapes(shapes),chs=d3.select(this).selectAll(".charts").data([[0,1]]),chsEnter=chs.enter().append("div").attr("class","chart");chsEnter.each(function(d){d3.select(this).datum(data).call(chart.yIndex(d[1]).xIndex(d[0]))})}var d3,scatter;return _export("default",onLoad),{setters:[function(_d){d3=_d.default},function(_d3Scatter){scatter=_d3Scatter.default}],execute:function(){}}}),System.register("components/fantom5/Motakis_et_al_2013/scatter.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","d3","./scatter.css!","./scatter2"],function(_export,_context){"use strict";var _classCallCheck,_createClass,d3,scatter,controller;return{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0012BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0012BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0012BabelHelpersCreateClassJs.default},function(_d){d3=_d.default},function(_scatterCss){},function(_scatter){scatter=_scatter.default}],execute:function(){controller=function(){function controller(){var _this=this;_classCallCheck(this,controller),this.edit=!1,this.editorOptions={data:this.dataPackage,enableOpen:!1,enableProtected:!0,onChange:function(){return _this.change()}}}return _createClass(controller,[{key:"change",value:function(){var data=this.dataPackage.resources.filter(function(d){return Boolean(d.data)}).map(function(d){return d.data}),container=d3.select("#_fantom5_Motakis_et_al_2013__chart");container.selectAll("div").remove();var divs=container.selectAll("div").data(data);divs.enter().append("div"),divs.each(scatter)}},{key:"$onInit",value:function(){this.change()}}]),controller}(),_export("default",{controller:controller,templateUrl:"components/fantom5/Motakis_et_al_2013/scatter.html",bindings:{dataPackage:"<package"}})}}}),System.registerDynamic("components/fantom5/Forrest_et_al_2014/venn.css!github:systemjs/plugin-css@0.1.30/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.register("components/fantom5/Forrest_et_al_2014/venn-chart.js",["venn.js","d3-tip","d3-tip/examples/example-styles.css!"],function(_export,_context){"use strict";var venn,d3Tip;return _export("default",function(data){function colorCombo(d){var color="white";return d["Cell Line"]===!0&&(color=d3.interpolateRgb(color,dColors[0])(.3)),d.Tissue===!0&&(color=d3.interpolateRgb(color,dColors[1])(.3)),d.Primary===!0&&(color=d3.interpolateRgb(color,dColors[2])(.3)),color}function makeVenn(data,f,t){var width=350,height=350,ndata={};data.forEach(function(d){ndata[d.label]=d.total});var fmt=d3.format("0,000"),sets=[{sets:["P"],size:ndata.P+ndata.PT+ndata.PC+ndata.PCT,label:"Primary "+fmt(ndata.P)},{sets:["C"],size:ndata.C+ndata.PC+ndata.CT+ndata.PCT,label:"Cell Line "+fmt(ndata.C)},{sets:["T"],size:ndata.T+ndata.PT+ndata.CT+ndata.PCT,label:"Tissue "+fmt(ndata.T)},{sets:["P","C"],size:ndata.PC+ndata.PCT},{sets:["P","T"],size:ndata.PT+ndata.PCT},{sets:["C","T"],size:ndata.CT+ndata.PCT},{sets:["P","C","T"],size:ndata.PCT}],color=d3.scale.ordinal().domain([sets[1].label,sets[2].label,sets[0].label]).range(dColors),chart=venn.VennDiagram().colours(color).width(width).height(height),svg=container.append("span").datum(sets).call(chart);svg.select("svg").attr("title",t),svg.selectAll("text").style("fill","black"),svg.selectAll("path").attr("opacity","0.2").style("fill-opacity","1"),svg.selectAll(".venn-intersection").attr("opacity","0").style("fill-opacity","0")}function makeBar(data,f,t){var padding={top:70,right:10,bottom:10,left:10},height=400,width=200,max=d3.max(data,f),x=d3.scale.linear().domain([0,max]).range([0,width]).nice(),chart=container.append("svg").attr("title",t).attr("class","chart  col-xs-3").attr("width",width+2*padding.left+padding.right).attr("height",height+padding.left+padding.right).append("g").attr("transform","translate("+padding.left+","+padding.top+")");chart.call(tooltip),chart.append("text").attr("class","title").attr("text-anchor","middle").attr("x",width/2).text(t);var bars=chart.selectAll(".percent_bar").data(data).enter().append("rect").attr("class","percent_bar").attr("y",function(d,i){return 30*i+30}).attr("x",0).attr("height",25).style("fill",colorCombo).on("mouseover",tooltip.show).on("mouseout",tooltip.hide);bars.transition().duration(1e3).attr("width",function(d){return x(f(d))});var yAxis=d3.svg.axis().scale(x).ticks(5).orient("bottom").tickFormat(sFormat);chart.append("g").attr("class","axis").attr("transform","translate(0,5)").call(yAxis),chart.selectAll(".label").data(data).enter().append("text").attr("class","label").attr("y",function(d,i){return 30*i+30+17}).attr("x",5).attr("text-anchor","right").text(function(d){return d.label2})}var container=d3.select(this),dColors=["lime","blue","red"],percentFormat=d3.format("%"),sFormat=d3.format("s"),tooltip=d3Tip().attr("class","d3-tip").direction("e").html(function(d){var html=d.label;return d.total&&(html+="<br />Total Peaks "+d.total),d.Novel&&(html+="<br />Novel "+d.Novel+" ("+percentFormat(d.Novel/d.total)+")"),html});data.forEach(function(d){switch(d.Novel=+d.Novel,d.Known=+d.Known,d.total=d.Novel+d.Known,d.percent=d.Novel/d.total*100,d["Cell Line"]="true"===d["Cell Line"],d.Tissue="true"===d.Tissue,d.Primary="true"===d.Primary,d.label=d.Primary?"P":"",d.label+=d["Cell Line"]?"C":"",d.label+=d.Tissue?"T":"",d.label){case"P":d.label2="Primary";break;case"T":d.label2="Tissue";break;case"C":d.label2="Cell Line";break;default:d.label2=d.label}}),data.sort(function(a,b){return d3.ascending(a.percent,b.percent)}),makeVenn(data,function(d){return d.total},"DPI defined peaks"),makeBar(data,function(d){return d.total},"Total peaks"),makeBar(data,function(d){return d.percent},"Percent novel peaks")}),{setters:[function(_vennJs){venn=_vennJs.default},function(_d3Tip){d3Tip=_d3Tip.default},function(_d3TipExamplesExampleStylesCss){}],execute:function(){}}}),System.register("components/fantom5/Forrest_et_al_2014/venn.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/createClass.js","d3","./venn.css!","./venn-chart"],function(_export,_context){"use strict";var _classCallCheck,_createClass,d3,chart,controller;return{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0012BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0012BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0012BabelHelpersCreateClassJs.default},function(_d){d3=_d.default},function(_vennCss){},function(_vennChart){chart=_vennChart.default}],execute:function(){controller=function(){function controller(){var _this=this;_classCallCheck(this,controller),this.editorOptions={data:this.dataPackage,enableOpen:!1,enableProtected:!0,onChange:function(){return _this.change()}}}return _createClass(controller,[{key:"change",value:function(){var data=this.dataPackage.resources.filter(function(d){return Boolean(d.data)}).map(function(d){return d.data}),container=d3.select("#_fantom5_Forrest_et_al_2014__chart");container.selectAll("div").remove();var divs=container.selectAll("div").data(data);divs.enter().append("div"),divs.each(chart)}},{key:"$onInit",value:function(){this.change()}}]),controller}(),_export("default",{controller:controller,templateUrl:"components/fantom5/Forrest_et_al_2014/venn.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/fantom5/routes.js",["angular","components/fantom5/index","components/fantom5/Lizio_et_al_2015/timeCourse","components/fantom5/Motakis_et_al_2013/scatter","components/fantom5/Forrest_et_al_2014/venn"],function(_export,_context){"use strict";var angular,indexComponent,timeCourseComponent,motakisComponent,forrestComponent;return{setters:[function(_angular){angular=_angular.default},function(_componentsFantom5Index){indexComponent=_componentsFantom5Index.default},function(_componentsFantom5Lizio_et_al_2015TimeCourse){timeCourseComponent=_componentsFantom5Lizio_et_al_2015TimeCourse.default},function(_componentsFantom5Motakis_et_al_2013Scatter){motakisComponent=_componentsFantom5Motakis_et_al_2013Scatter.default},function(_componentsFantom5Forrest_et_al_2014Venn){forrestComponent=_componentsFantom5Forrest_et_al_2014Venn.default}],execute:function(){_export("default",angular.module("fantom5",[]).component("fantom",indexComponent).component("forrest",forrestComponent).component("lizio",timeCourseComponent).component("motakis",motakisComponent).config(["$routeProvider",function($routeProvider){$routeProvider.when("/fantom5",{template:'<fantom data-package="$resolve.dataPackage"></fantom>',datapackageUrl:"components/fantom5/datapackage.json"}).when("/fantom5/Lizio_et_al_2015",{template:'<lizio data-package="$resolve.dataPackage"></lizio>',datapackageUrl:"components/fantom5/Lizio_et_al_2015/datapackage.json"}).when("/fantom5/Motakis_et_al_2013",{template:'<motakis data-package="$resolve.dataPackage"></motakis>',datapackageUrl:"components/fantom5/Motakis_et_al_2013/datapackage.json"}).when("/fantom5/Forrest_et_al_2014",{template:'<forrest data-package="$resolve.dataPackage"></forrest>',datapackageUrl:"components/fantom5/Forrest_et_al_2014/datapackage.json"})}]))}}}),System.register("common/services/grid/grid.js",["angular","angular-ui-grid","angular-ui-grid/ui-grid.css!"],function(_export,_context){"use strict";var angular,module;return{setters:[function(_angular){angular=_angular.default},function(_angularUiGrid){},function(_angularUiGridUiGridCss){}],execute:function(){module=angular.module("projectX.grid",["ui.grid","ui.grid.autoResize","ui.grid.selection","ui.grid.resizeColumns","ui.grid.pagination"]),_export("default",module.name)}}}),System.register("common/services/facets/facet.html!github:systemjs/plugin-text@0.0.8/text.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",'<div class="facet">\n  <ul class="list-unstyled facet-list">\n    <li class="facet-item" ng-repeat="row in $ctrl.list | limitTo : $ctrl.limit" ng-click="$ctrl.toggle(row.key)">\n      <p ng-class="{true: \'bg-info\', false: \'bg-danger\'}[$ctrl.exists(row.key)]">\n          <span>\n            <input type="checkbox" ng-checked="$ctrl.exists(row.key)">\n            <label>\n              {{row.key}}\n            </label>\n          </span>\n          {{row.value.max}}\n          <uib-progressbar class="pull-right" max="100" value="$ctrl.scale(row.value.count)">\n            <span style="white-space:nowrap;">{{row.value.count}}</span>\n          </uib-progressbar>\n      <p>\n    </li>\n  </ul>\n  <div class="btn-group">\n    <a class="btn btn-sm btn-link"\n      ng-if="$ctrl.list.length > $ctrl.minLimit"\n      ng-click="$ctrl.toggleLimit()">\n      <span ng-switch="$ctrl.maxLimit > $ctrl.limit">\n        <i class="fa fa-plus" aria-label="show more" ng-switch-when="true">\n          show more (showing first {{$ctrl.limit | number}})\n        </i>\n        <i class="fa fa-minus" aria-label="show less" ng-switch-when="false">\n          show less\n        </i>\n      </span>\n    </a>\n    <a class="btn btn-sm btn-link"\n      ng-if="$ctrl.facet.filterTo.length > 0"\n      ng-click="$ctrl.clear()">\n      <i class="fa fa-times-circle-o" aria-label="Remove Filter">\n        clear\n      </i>\n    </a>\n    <a class="btn btn-sm btn-link" style="visibility: hidden">&nbsp;</a>\n  </div>\n</div>\n')}}}),System.register("common/services/facets/facet.utils.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/extends.js"],function(_export,_context){"use strict";function readableName(columnName){return"undefined"==typeof columnName||void 0===columnName||null===columnName?columnName:("string"!=typeof columnName&&(columnName=String(columnName)),columnName=columnName.split(".").pop(),columnName.replace(/_+/g," ").replace(/^[A-Z]+$/,function(match){return(match.charAt(0).toUpperCase()+match.slice(1)).toLowerCase()}).replace(/([\w\u00C0-\u017F]+)/g,function(match){return match.charAt(0).toUpperCase()+match.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))}function createFacet(cf,facet){function toggle(value){if(null===value)filterTo.splice(0,filterTo.length);else{var index=filterTo.indexOf(value);index>-1?filterTo.splice(index,1):filterTo.push(value)}filter()}function filter(){return 0===filterTo.length?dimension.filter(null):1!==filterTo.length||groupBy?dimension.filter(filterFn):dimension.filterExact(filterTo[0])}function filterFn(d){return 0===filterTo.length||(self.groupBy?filterTo.indexOf(self.groupBy(d))>-1:filterTo.indexOf(d)>-1)}var displayName=facet.displayName||readableName(facet.key),accessor=facet.accessor||function(d){return d[facet.key]},dimension=cf.dimension(accessor),groupBy=facet.groupBy||void 0,filterTo=[],self=_extends({displayName:displayName,dimension:dimension,group:groupBy?dimension.group(groupBy):dimension.group().orderNatural(),filter:filter,filterTo:filterTo,filterFn:filterFn,toggle:toggle,visible:!0},facet);return self}function setFilter(state,type,value){"all"===type||null===type||"*"===type?type=Object.keys(state):"string"==typeof type&&(type=[type]),type.forEach(function(t){state[t].toggle(value)})}function setFilter$(state,onUpdate){return function(type,value){setFilter(state,type,value),onUpdate(state)}}var _extends;return _export("readableName",readableName),_export("createFacet",createFacet),_export("setFilter",setFilter),_export("setFilter$",setFilter$),{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0012BabelHelpersExtendsJs.default}],execute:function(){}}}),System.register("common/services/facets/facet.controller.js",["d3","./facet.less!","./facet.utils"],function(_export,_context){"use strict";function controller($scope,$log){function setupFacet(){var facet=$ctrl.facet;facet.query||(facet.universe?loadQuery():!function(){var listener=$scope.$watch(function(){return facet.universe},function(u){u&&(listener(),$log.debug("facet.universe defined",facet.key),loadQuery())})}())}function loadQuery(){var facet=$ctrl.facet;facet.displayName=facet.displayName||readableName(facet.key);var sortBy=facet.sortBy||function(a,b){return b.value.count-a.value.count},u=facet.universe,start=new Date;$log.debug("start query",facet.key),u.query({groupBy:facet.groupBy||facet.key,type:facet.type||"string"}).then(function(q){$log.debug("done query",facet.key,new Date-start,"ms"),facet.query=q,$ctrl.list=q.data.slice().sort(sortBy),setScale(),u.onFilter(setScale)}).catch(console.error.bind(console))}function setScale(){$ctrl.list&&$scope.$applyAsync(function(){var max=d3.max($ctrl.list,function(d){return d.value.count});scale.domain([0,max])})}function clear(){$ctrl.facets.filter($ctrl.facet.key)}function exists(item){var filter=$ctrl.facet.universe.filters[$ctrl.facet.key];return!!filter&&(Array.isArray(filter.value)?filter.value.indexOf(item)>-1:filter.value===item)}function toggle(item){$ctrl.facet.universe.filter($ctrl.facet.key,item).catch(console.error.bind(console))}function toggleLimit(){$ctrl.limit=$ctrl.limit===$ctrl.minLimit?$ctrl.maxLimit:$ctrl.minLimit}var $ctrl=this;$ctrl.facet.displayName=$ctrl.facet.displayName||readableName($ctrl.facet.key);var minLimit=5,maxLimit=100,scale=d3.scale.linear().range([0,100]);return $scope.$watch(function(){return $ctrl.facet.collapsed},function(c){c||($log.debug("opened",$ctrl.facet.key),setupFacet())}),Object.assign($ctrl,{minLimit:minLimit,maxLimit:maxLimit,limit:minLimit,size:0,list:[],scale:scale,toggle:toggle,toggleLimit:toggleLimit,
exists:exists,clear:clear})}var d3,readableName;return{setters:[function(_d){d3=_d.default},function(_facetLess){},function(_facetUtils){readableName=_facetUtils.readableName}],execute:function(){controller.$inject=["$scope","$log"],_export("default",controller)}}}),System.register("common/services/facets/facet.component.js",["./facet.html!text","./facet.controller"],function(_export,_context){"use strict";var template,controller;return{setters:[function(_facetHtmlText){template=_facetHtmlText.default},function(_facetController){controller=_facetController.default}],execute:function(){_export("default",{controller:controller,template:template,bindings:{facet:"<"}})}}}),System.register("common/services/facets/facet-bar.component.js",[],function(_export,_context){"use strict";var template;return{setters:[],execute:function(){template='\n  <div class="tag-bar">\n    <span ng-repeat="(key, facet) in $ctrl.facets">\n      <span ng-repeat="item in facet.filterTo">\n        <span class="label label-default">\n          {{facet.displayName}}: {{item}}\n          <i class="fa fa-times" aria-hidden="true" ng-click="$ctrl.setFilter(key, item)"></i>\n        </span>\n      </span>\n    </span>\n  </div>',_export("default",{template:template,bindings:{facets:"<",setFilter:"<"}})}}}),System.register("common/services/facets/facet-panels.component.html!github:systemjs/plugin-text@0.0.8/text.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",'<div class="text-right">\n  <a class="btn btn-sm btn-link"\n    ng-click="$ctrl.clearAll()">\n    <i class="fa fa-times-circle-o" aria-label="Remove Filter">\n      Clear all\n    </i>\n  </a>\n</div>\n<div class="panel panel-default panel-facet"\n  ng-repeat="facet in $ctrl.facets"\n  ng-if="!facet.hidden">\n  <div class="panel-heading" ng-click="facet.collapsed = !facet.collapsed">\n    <h4 class="panel-title" uib-tooltip-html="::facet.description" tooltip-placement="right" tooltip-append-to-body="true">\n          {{(facet.displayName || facet.key)}} <small>{{facet.query.data.length}}</small>\n          <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-right\': facet.collapsed, \'glyphicon-chevron-down\': !facet.collapsed}"></i>\n    </h4>\n  </div>\n  <div class="panel-body" uib-collapse="facet.collapsed">\n    <small>\n      <facet facet="facet"></facet>\n    </small>\n  </div>\n</div>\n')}}}),System.register("common/services/facets/facet-panels.component.js",["./facet-panels.component.html!text"],function(_export,_context){"use strict";var template;return{setters:[function(_facetPanelsComponentHtmlText){template=_facetPanelsComponentHtmlText.default}],execute:function(){_export("default",{template:template,bindings:{facets:"<",clearAll:"&"}})}}}),System.register("common/services/facets/facets.js",["angular","./facet.component","./facet-bar.component","./facet-panels.component"],function(_export,_context){"use strict";var angular,facetComponent,facetBarComponent,facetPanelsComponent,facets;return{setters:[function(_angular){angular=_angular.default},function(_facetComponent){facetComponent=_facetComponent.default},function(_facetBarComponent){facetBarComponent=_facetBarComponent.default},function(_facetPanelsComponent){facetPanelsComponent=_facetPanelsComponent.default}],execute:function(){facets=angular.module("projectX.facets",[]).component("facet",facetComponent).component("facetbar",facetBarComponent).component("facetpanels",facetPanelsComponent).name,_export("default",facets)}}}),System.register("components/examples/index.js",["common/styles/index.css!"],function(_export,_context){"use strict";function controller(dataService){this.dataPackage.resources.forEach(function(resource){dataService.normalizePackage(resource.url,resource.data)})}return{setters:[function(_commonStylesIndexCss){}],execute:function(){controller.$inject=["dataService"],_export("default",{controller:controller,templateUrl:"components/examples/index.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/examples/chiasm/chiasm.js",["chiasm","chiasm-charts","chiasm-layout","chiasm-links","chiasm-data-reduction","./chiasm.less!","codemirror/lib/codemirror.css!","inlet/inlet.css!"],function(_export,_context){"use strict";function controller(){function resourceToChiasm(resource){return{metadata:{columns:resource.schema?resource.schema.fields:[]},data:resource.data}}function draw(){chiasm.config=$ctrl.dataPackage.$resourcesByName.config.data,$ctrl.dataPackage.resources.forEach(function(resource){"config"!==resource.name&&(chiasm[resource.name]=resourceToChiasm(resource))})}var $ctrl=this,chiasm=new Chiasm;chiasm.plugins.layout=chiasmLayout,chiasm.plugins.links=chiasmLinks,chiasm.plugins.dataReduction=chiasmDataReduction,chiasm.plugins.barChart=chiasmCharts.components.barChart,chiasm.plugins.scatterPlot=chiasmCharts.components.scatterPlot,chiasm.plugins.lineChart=chiasmCharts.components.lineChart,chiasm.plugins.heatMap=chiasmCharts.components.heatMap,chiasm.plugins.boxPlot=chiasmCharts.components.boxPlot;var layoutComponent=null;return chiasm.getComponent("layout").then(function(comp){comp.when(["containerSVG"],function(svg){svg.attr("title","Chiasm Chart")}),layoutComponent=comp}),Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:draw},$onInit:draw,$onDestroy:function(){layoutComponent&&"function"==typeof layoutComponent.destroy&&layoutComponent.destroy()}})}var Chiasm,chiasmCharts,chiasmLayout,chiasmLinks,chiasmDataReduction;return{setters:[function(_chiasm){Chiasm=_chiasm.default},function(_chiasmCharts){chiasmCharts=_chiasmCharts.default},function(_chiasmLayout){chiasmLayout=_chiasmLayout.default},function(_chiasmLinks){chiasmLinks=_chiasmLinks.default},function(_chiasmDataReduction){chiasmDataReduction=_chiasmDataReduction.default},function(_chiasmLess){},function(_codemirrorLibCodemirrorCss){},function(_inletInletCss){}],execute:function(){_export("default",{controller:controller,templateUrl:"components/examples/chiasm/chiasm.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/examples/biojs/biojs.js",["angular","biojs-vis-example","biojs-io-fasta/lib/fasta","./biojs.less!"],function(_export,_context){"use strict";function controller(){function draw(){$el.empty(),$ctrl.dataPackage.resources.filter(function(r){return"fasta"===r.format}).forEach(function(r){fasta.parse(r.content).forEach(function(d){var $fe=angular.element("\n              <div>\n                <h3>"+d.name+"</h3>\n                <biovisexample></biovisexample>\n              </div>");biovisexample({el:$fe.find("biovisexample")[0],sequence:d.seq}),$el.append($fe)})})}var $ctrl=this,$el=angular.element(document.getElementById("_examples_biojs__viewer"));return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,enableSvgDownload:!1,enablePngDownload:!1,onChange:draw},$onInit:function(){draw()}})}var angular,biovisexample,fasta;return{setters:[function(_angular){angular=_angular.default},function(_biojsVisExample){biovisexample=_biojsVisExample.default},function(_biojsIoFastaLibFasta){fasta=_biojsIoFastaLibFasta.default},function(_biojsLess){}],execute:function(){_export("default",{controller:controller,templateUrl:"components/examples/biojs/biojs.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/examples/bars/bars.js",["d3","mobx","./bars.less!","./bars-chart"],function(_export,_context){"use strict";function controller($log){function draw(){$log.debug("draw");var data=$ctrl.dataPackage.resources.filter(function(d){return Boolean(d.data)}).map(function(d){return d.data}),element=d3.select("#_examples_bars__chart"),width=element[0][0].clientWidth,divs=element.selectAll(".chart").data(data);divs.enter().append("div").attr("class","chart"),divs.exit().remove(),divs.call(chart.width(width).height("auto"))}var $ctrl=this,chart=new BarChart;return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage},$onInit:function(){$log.debug("$onInit"),autorun(draw)},draw:draw})}var d3,autorun,BarChart;return{setters:[function(_d){d3=_d.default},function(_mobx){autorun=_mobx.autorun},function(_barsLess){},function(_barsChart){BarChart=_barsChart.default}],execute:function(){controller.$inject=["$log"],_export("default",{controller:controller,templateUrl:"components/examples/bars/bars.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/examples/treemap/treemap.js",["angular","screenfull","webtreemap","webtreemap/webtreemap.css!","./treemap.less!"],function(_export,_context){"use strict";function controller($log,$timeout,$element){function draw(){angular.forEach($element.find("treemap"),function(d){var elm=angular.element(d),name=elm.attr("data-name");drawMap(elm,$ctrl.dataPackage.$resourcesByName[name])})}function drawMap(elm,res){function addNode(path,size,tag){var parts=path.split("/"),node=treeData;node.data.$area+=size,parts.forEach(function(part){var child=node.children.find(function(child){return child.name===part});child||(child=newNode(part,tag),node.children.push(child)),node=child,node.data.$area+=size})}function newNode(name,tag){return{name:name,data:{$area:0,symbol:tag},children:[]}}function addSizeToTitle(node,total){var size=node.data.$area,pct=100*size/total;node.name+=" • "+size.toLocaleString()+" • "+pct.toFixed(2)+"%",node.children.forEach(function(x){addSizeToTitle(x,total)})}if(elm.empty(),res.data){var tree=res.data,treeData=newNode("/");if(Array.isArray(tree))tree.forEach(function(d){addNode(d.Source,d.Size,d.Tag)});else for(var source in tree)Object.hasOwnProperty.call(tree,source)&&addNode(source,tree[source]);addSizeToTitle(treeData,treeData.data.$area),webtreemap(elm[0],treeData)}}var $ctrl=this;return screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(event){$log.debug("screenfull.raw.fullscreenerror"),angular.element(event.target).toggleClass("fullscreen",screenfull.isFullscreen),draw()}),Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,enableSvgDownload:!1,enablePngDownload:!1,onChange:draw},draw:draw,$onInit:function(){$timeout(draw,0)},fullscreen:function($event){var elm=angular.element($event.target).parent().find("treemap");screenfull.request(elm[0])}})}var angular,screenfull,webtreemap;return{setters:[function(_angular){angular=_angular.default},function(_screenfull){screenfull=_screenfull.default},function(_webtreemap){webtreemap=_webtreemap.default},function(_webtreemapWebtreemapCss){},function(_treemapLess){}],execute:function(){controller.$inject=["$log","$timeout","$element"],_export("default",{controller:controller,templateUrl:"components/examples/treemap/treemap.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/examples/sunburst/sunburst-chart.js",["d3-hierarchy","d3-scale","d3-selection","d3-shape","d3-transition"],function(_export,_context){"use strict";function Sun(){function sun(div,data){function tip(state,n){"show"===state?d4.select(div).select(".label").selectAll("text").data(n.data.name.split("•")).text(function(d){return d}):d4.select(div).select(".label").selectAll("text").data(root.data.name.split("•")).text(function(d){return d})}var width=div.offsetWidth,height=div.offsetHeight,radius=Math.min(width,height)/2,color=d4.scaleOrdinal().range(["#330136","#5e1742","#962e40","#c9463d","#ff5e35"]),x=d4.scaleLinear().range([0,2*Math.PI]),y=d4.scaleLinear().range([0,radius]),arc=d4.arc().startAngle(function(d){return Math.max(0,Math.min(2*Math.PI,x(d.x0)))}).endAngle(function(d){return Math.max(0,Math.min(2*Math.PI,x(d.x1)))}).innerRadius(function(d){return Math.max(0,y(d.y0))}).outerRadius(function(d){return Math.max(0,y(d.y1))}),root=d4.hierarchy(data);root.descendants().forEach(function(node){node.value=node.data.data.$area}),d4.partition()(root);var svg=d4.select(div).append("svg").attr("title","sunburst").attr("width",width).attr("height",height);svg.append("rect").attr("width","100%").attr("height","100%").attr("fill","#fff").attr("class","bg");var visual=svg.append("g").datum(root).attr("transform","translate("+width/2+","+height/2+")").classed("visual",!0);visual.selectAll("path").data(root.descendants()).enter().append("path").attr("class",function(d,i){return"v"+i}).attr("display",function(d){return d.depth?null:"none"}).attr("d",function(d){return arc(d)}).style("stroke","#fff").style("fill",function(d){return color(d.data.name.split("•")[0])}).style("fill-rule","evenodd").on("mouseover",function(d){return tip("show",d)}).on("mouseout",tip("hide"));var label=svg.append("g").datum(root).attr("transform","translate("+width/2+","+height/2+")").classed("label",!0);label.selectAll("text").data(function(d){return d.data.name.split("•")}).enter().append("text").attr("text-anchor","middle").attr("dy",function(d,i){return-2.5+2*i+"ex"}).text(function(d){return d})}return sun}var hierarchy,partition,scaleOrdinal,scaleLinear,select,selectAll,event,arc,transition,d4;return _export("default",Sun),{setters:[function(_d3Hierarchy){hierarchy=_d3Hierarchy.hierarchy,partition=_d3Hierarchy.partition},function(_d3Scale){scaleOrdinal=_d3Scale.scaleOrdinal,scaleLinear=_d3Scale.scaleLinear},function(_d3Selection){select=_d3Selection.select,selectAll=_d3Selection.selectAll,event=_d3Selection.event},function(_d3Shape){arc=_d3Shape.arc},function(_d3Transition){transition=_d3Transition.transition}],execute:function(){d4={},d4=d3.version?{hierarchy:hierarchy,partition:partition,scaleOrdinal:scaleOrdinal,scaleLinear:scaleLinear,select:select,selectAll:selectAll,event:event,arc:arc,transition:transition}:d3}}}),System.register("components/examples/sunburst/sunburst.js",["angular","screenfull","./sunburst.less!","./sunburst-chart"],function(_export,_context){"use strict";function controller($log,$timeout,$element){function draw(){angular.forEach($element.find("sunburst"),function(d){var elm=angular.element(d),name=elm.attr("data-name");drawMap(elm,$ctrl.dataPackage.$resourcesByName[name])})}function drawMap(elm,res){function addNode(path,size,tag){var parts=path.split("/"),node=treeData;node.data.$area+=size,parts.forEach(function(part){var child=node.children.find(function(child){return child.name===part});child||(child=newNode(part,tag),node.children.push(child)),node=child,node.data.$area+=size})}function newNode(name,tag){return{name:name,data:{$area:0,symbol:tag},children:[]}}function addSizeToTitle(node,total){var size=node.data.$area,pct=100*size/total;node.name+=" • "+size.toLocaleString()+" • "+pct.toFixed(2)+"%",node.children.forEach(function(x){addSizeToTitle(x,total)})}if(elm.empty(),res.data){var tree=res.data,treeData=newNode("/");if(Array.isArray(tree))tree.forEach(function(d){addNode(d.Source,d.Size,d.Tag)});else for(var source in tree)Object.hasOwnProperty.call(tree,source)&&addNode(source,tree[source]);addSizeToTitle(treeData,treeData.data.$area),chart(elm[0],treeData)}}var $ctrl=this,chart=new SunburstChart;return screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(event){$log.debug("screenfull.raw.fullscreenerror"),angular.element(event.target).toggleClass("fullscreen",screenfull.isFullscreen),draw()}),Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,enableSvgDownload:!0,enablePngDownload:!1,onChange:draw},draw:draw,$onInit:function(){$timeout(draw,0)},fullscreen:function($event){var elm=angular.element($event.target).parent().find("sunburst");screenfull.request(elm[0])}})}var angular,screenfull,SunburstChart;return{setters:[function(_angular){angular=_angular.default},function(_screenfull){screenfull=_screenfull.default},function(_sunburstLess){},function(_sunburstChart){SunburstChart=_sunburstChart.default}],execute:function(){controller.$inject=["$log","$timeout","$element"],_export("default",{controller:controller,templateUrl:"components/examples/sunburst/sunburst.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/examples/bars/bars-chart.js",["d3","d3-tip","d3-tip/examples/example-styles.css!"],function(_export,_context){"use strict";function Bars(opts){function bars(selection){selection.each(function(d){var el=d3.select(this);tip.rootElement(this.parentNode),xScale.rangeRoundBands([0,width],.1),yScale.range([height,0]),el.selectAll("svg").remove();var svg=el.append("svg").attr("class","bar-chart-svg").attr("title",title).attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");svg.call(tip),xScale.domain(d.map(xValue)),yScale.domain([0,d3.max(d,yValue)]),svg.append("g").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis),svg.append("g").attr("class","y axis").call(yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(yAxisLabel),svg.selectAll(".bar").data(d).enter().append("rect").attr("class","bar").attr("x",xMap).attr("width",xScale.rangeBand).attr("y",yMap).attr("height",function(d){return height-yMap(d)}).on("mouseover",function(d){tip.show(d,this)}).on("mouseout",tip.hide)})}opts=opts||{};var margin=opts.margin||{top:20,right:20,bottom:30,left:40},width=960-margin.left-margin.right,height=500-margin.top-margin.bottom,title=opts.title||"Bar Chart",formatPercent=d3.format(".0%"),xValue=function(d){return d.letter},xScale=d3.scale.ordinal(),xMap=function(d){return xScale(xValue(d))},xAxis=d3.svg.axis().scale(xScale).orient("bottom"),yValue=function(d){return d.frequency},yScale=d3.scale.linear(),yMap=function(d){return yScale(yValue(d))},yAxis=d3.svg.axis().scale(yScale).orient("left").tickFormat(formatPercent),yAxisLabel="Frequency",percentFormat=d3.format(".3%"),tip=d3Tip().attr("class","d3-tip animate").offset([-10,0]).html(function(d){return"Letter: "+d.letter+"<br />Frequency: "+percentFormat(d.frequency)});return bars.width=function(_){return arguments.length<1?width:(width=_,bars)},bars.height=function(_){return arguments.length<1?height:("auto"===_&&(_=440/900*width),height=_,bars)},bars}var d3,d3Tip;return _export("default",Bars),{setters:[function(_d){d3=_d.default},function(_d3Tip){d3Tip=_d3Tip.default},function(_d3TipExamplesExampleStylesCss){}],execute:function(){}}}),System.register("components/examples/polymer/bar-chart-tag.js",["polymer/polymer.html!","d3","components/examples/bars/bars-chart"],function(_export,_context){"use strict";var d3,Bars;return{setters:[function(_polymerPolymerHtml){},function(_d){d3=_d.default},function(_componentsExamplesBarsBarsChart){Bars=_componentsExamplesBarsBarsChart.default}],execute:function(){Polymer({is:"bar-chart",properties:{barData:{Type:String,notify:!0},data:{computed:"parse(barData)"}},attached:function(){this.resized=this.draw.bind(this),window.addEventListener("resize",this.resized)},detached:function(){window.removeEventListener("resize",this.resized)},observers:["dataChanged(data)"],created:function(){this.bars=new Bars(this)},parse:function(x){return JSON.parse(x)},dataChanged:function(){this.draw()},draw:function(){if(this.data&&this.elem){var width=this.clientWidth-80;d3.select(this.elem).datum(this.data).call(this.bars.width(width).height("auto"))}},ready:function(){this.elem=this.$.chart,this.draw()}})}}}),System.register("components/examples/polymer/bar-chart.js",["./bar-chart-tag.html!","./bar-chart-tag"],function(_export,_context){"use strict";function controller(){return Object.assign(this,{editorOptions:{data:this.dataPackage}})}return{setters:[function(_barChartTagHtml){},function(_barChartTag){}],execute:function(){controller.$inject=["$scope"],_export("default",{controller:controller,templateUrl:"components/examples/polymer/bar-chart.html",bindings:{dataPackage:"<package"}})}}}),System.register("common/services/grid/grid.utils.js",["URIjs"],function(_export,_context){"use strict";function getLinkText(uri){var host=urijs(uri).hostname();return hostLinks[host]||host}var urijs,internalLinkTemplate,filterTemplate,hostLinks,externalLinkTemplate,gridDefaults,headerCellTemplate;return _export("getLinkText",getLinkText),{setters:[function(_URIjs){urijs=_URIjs.default}],execute:function(){_export("internalLinkTemplate",internalLinkTemplate=function(x){return'<div class="ui-grid-cell-contents" title="TOOLTIP">\n  <a href="#/'+x+'/{{COL_FIELD}}" target="_self">{{COL_FIELD}}</a>\n</div>'}),_export("internalLinkTemplate",internalLinkTemplate),_export("filterTemplate",filterTemplate='<div class="ui-grid-cell-contents" title="TOOLTIP">\n  {{COL_FIELD}}\n  <button class="btn btn-link btn-xs" ng-click="grid.appScope.$ctrl.filter(row.entity.id)" title="Click to filter Gene association table above">\n    <i class="fa fa-filter" aria-hidden="true"></i>\n  </button>\n</div>'),_export("filterTemplate",filterTemplate),hostLinks={"en.wikipedia.org":"wikipedia","www.ncbi.nlm.nih.gov":"ncbi"},_export("externalLinkTemplate",externalLinkTemplate='<div class="ui-grid-cell-contents" title="TOOLTIP">\n  <span ng-switch="COL_FIELD">\n    <span ng-switch-when="no">\n      {{COL_FIELD}}\n    </span>\n    <span ng-switch-when="uncurated">\n      {{COL_FIELD}}\n    </span>\n    <span ng-switch-default>\n      <a href="{{COL_FIELD}}" target="_self">\n        {{grid.appScope.$ctrl.getLinkText(COL_FIELD)}}\n      </a>\n    </span>\n  </span>\n</div>'),_export("externalLinkTemplate",externalLinkTemplate),_export("gridDefaults",gridDefaults={enableFiltering:!1,enableGridMenu:!0,enableColumnMenus:!1,enableSelectAll:!1,enableRowSelection:!0,selectionRowHeaderWidth:35,multiSelect:!1}),_export("gridDefaults",gridDefaults),_export("headerCellTemplate",headerCellTemplate='\n<div role="columnheader"\n      ng-class="{ \'sortable\': sortable }"\n      ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'"\n      aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"\n      uib-tooltip-html="col.headerTooltip(col)"\n      tooltip-placement="top"\n      tooltip-append-to-body="true">\n    <div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div>\n    <div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div>\n    <div ui-grid-filter></div>\n</div>'),_export("headerCellTemplate",headerCellTemplate)}}}),System.register("components/examples/universe/bar-chart.js",["d3","./universe.less!"],function(_export,_context){"use strict";function barChart(){function chart(selection){function barPath(groups){for(var path=[],i=-1,n=groups.length,d=null,w=x(groups[1].key)-x(groups[0].key)-2;++i<n;)d=groups[i],path.push("M",x(d.key)+1,",",height,"V",y(d.value.count),"h",w,"V",height);return path.join("")}function resizePath(d){var e=Number("e"===d),x=e?1:-1,y=height/3;return"M"+.5*x+","+y+"A6,6 0 0 "+e+" "+6.5*x+","+(y+6)+"V"+(2*y-6)+"A6,6 0 0 "+e+" "+.5*x+","+2*y+"ZM"+2.5*x+","+(y+8)+"V"+(2*y-8)+"M"+4.5*x+","+(y+8)+"V"+(2*y-8)}selection.each(function(_query){query=_query;var data=query.data;y.range([height,0]).domain(d3.extent(data,function(d){return d.value.count}));var xe=d3.extent(data,function(d){return d.key}),del=data[1].key-data[0].key;xe[1]+=del,x.domain(xe).rangeRound([0,width]),axis.scale(x),brush.x(x);var div=d3.select(this),g=div.select("g");if(g.empty()){var svg=div.append("svg").attr("title",title).attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom);svg.append("text").attr("class","title").attr("text-anchor","middle").attr("transform","translate("+width/2+","+margin.top/2+")").text(title),g=svg.append("g").attr("transform","translate("+margin.left+","+margin.top+")"),g.append("clipPath").attr("id","clip-"+id).append("rect").attr("width",width).attr("height",height),g.selectAll(".bar").data(["background","foreground"]).enter().append("path").attr("class",function(d){return d+" bar"}).datum(query.data,function(d){return d.key}),g.selectAll(".foreground.bar").attr("clip-path","url(#clip-"+id+")"),g.append("g").attr("class","axis").attr("transform","translate(0,"+height+")").call(axis);var gBrush=g.append("g").attr("class","brush").call(brush);gBrush.selectAll("rect").attr("height",height),gBrush.selectAll(".resize").append("path").attr("d",resizePath),chart.update=function(){div.call(chart)}}if(brushDirty)if(brushDirty=!1,g.selectAll(".brush").call(brush),div.select(".title button").style("display",brush.empty()?"none":null),brush.empty())g.selectAll("#clip-"+id+" rect").attr("x",0).attr("width",width);else{var extent=brush.extent();g.selectAll("#clip-"+id+" rect").attr("x",x(extent[0])).attr("width",x(extent[1])-x(extent[0]))}g.selectAll(".bar").attr("d",barPath)})}barChart.id||(barChart.id=0);var margin={top:20,right:10,bottom:20,left:10},x=d3.scale.linear(),y=d3.scale.linear(),id=barChart.id++,axis=d3.svg.axis().orient("bottom"),brush=d3.svg.brush(),brushDirty=null,round=null,width=500,height=100,title="",query=null;return brush.on("brushstart.chart",function(){var div=d3.select(this.parentNode.parentNode.parentNode);div.select(".title button").style("display",null)}),brush.on("brush.chart",function(){var g=d3.select(this.parentNode),extent=brush.extent();round&&g.select(".brush").call(brush.extent(extent=extent.map(round))).selectAll(".resize").style("display",null),g.select("#clip-"+id+" rect").attr("x",x(extent[0])).attr("width",x(extent[1])-x(extent[0])),query.universe.filter(query.column.key,extent,!0,!0)}),brush.on("brushend.chart",function(){if(brush.empty()){var div=d3.select(this.parentNode.parentNode.parentNode);div.select(".title button").style("display","none"),div.select("#clip-"+id+" rect").attr("x",null).attr("width","100%"),query.universe.filter(query.column.key,null,!0,!0)}}),chart.margin=function(_){return arguments.length?(margin=_,chart):margin},chart.width=function(_){return arguments.length?(width=_,chart):width},chart.height=function(_){return arguments.length?(height=_,chart):height},chart.title=function(_){return arguments.length?(title=_,chart):title},chart.x=function(_){return arguments.length?(x=_,axis.scale(x),brush.x(x),chart):x},chart.y=function(_){return arguments.length?(y=_,chart):y},chart.filter=function(_){return _?(brush.extent(_),query.universe.filter(query.column.key,_,!0,!0)):(brush.clear(),query.universe.filter(query.column.key,null,!0,!0)),brushDirty=!0,chart},chart.clearBrush=function(){return brush.clear(),brushDirty=!0,chart},chart.round=function(_){return arguments.length?(round=_,chart):round},d3.rebind(chart,brush,"on")}var d3;return _export("default",barChart),{setters:[function(_d){d3=_d.default},function(_universeLess){}],execute:function(){}}}),System.register("components/examples/universe/universe.js",["npm:systemjs-plugin-babel@0.0.12/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/extends.js","d3","universe","lodash","common/services/grid/grid.utils","./bar-chart"],function(_export,_context4){"use strict";function controller($scope,$log,cfpLoadingBar){function update(){$scope.$applyAsync(function(){$ctrl.gridOpts.data=$ctrl.data=$ctrl.id.top(1e3),draw(),cfpLoadingBar.complete()})}function setup(){var _this2=this,container=d3.select("#charts");return container.selectAll("div").remove(),$ctrl.charts=[{groupBy:"hour",displayName:"Time of Day"},{groupBy:"arrivalDelay",displayName:"Arrival Delay (min.)"},{groupBy:"distances",displayName:"Distance (mi.)"}],Promise.all($ctrl.charts.map(function(){var ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(chart){var element,width,q;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return element=container.append("div").attr("class","col-md-4"),width=element[0][0].clientWidth,chart.barChart=barChart().width(width-30).title(chart.displayName),_context3.next=5,$ctrl.universe.query(chart);case 5:return q=_context3.sent,_context3.abrupt("return",element.datum(q).call(chart.barChart));case 7:case"end":return _context3.stop()}},_callee3,_this2)}));return function(_x){return ref.apply(this,arguments)}}()))}function draw(){$ctrl.charts.forEach(function(chart){chart.barChart.update&&chart.barChart.update()})}var process=function(){var ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var raw,service;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return cfpLoadingBar.start(),raw=$ctrl.raw=$ctrl.dataPackage.resources[0].data,$log.debug("processing",raw.length),$ctrl.universe&&($ctrl.universe.clear(),$ctrl.universe=null),$ctrl.facets=[{key:"dayOfWeek",displayName:"Day of the Week"},{key:"origin",collapsed:!0,sortBy:_keySort},{key:"destination",collapsed:!0,sortBy:_keySort}],_context2.next=7,universe(raw,{generatedColumns:generatedColumns});case 7:return service=_context2.sent,$ctrl.universe=service,$ctrl.universe.onFilter(debounce(update,20)),_context2.next=12,$ctrl.universe.column("date");case 12:$ctrl.id=$ctrl.universe.column.find("date").dimension,setup(),update(),$ctrl.facets.forEach(function(facet){facet.universe=service}),$log.debug("universe setup done");case 17:case"end":return _context2.stop()}},_callee2,this)}));return function(){return ref.apply(this,arguments)}}(),$ctrl=this,gridOpts=_extends({},gridDefaults,{columnDefs:columnDefs,enableColumnResizing:!0,enablePaginationControls:!1,flatEntityAccess:!0,enableFiltering:!1,data:[]});return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,enableAdd:!1,onChange:debounce(process,300)},gridOpts:gridOpts,clearAll:function(){var _this=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return cfpLoadingBar.start(),_context.next=3,$ctrl.universe.filterAll();case 3:$ctrl.charts.forEach(function(chart){return chart.barChart.clearBrush()});case 4:case"end":return _context.stop()}},_callee,_this)}))()},raw:$ctrl.dataPackage.resources[0].data,$onInit:function(){$log.debug("onInit"),process()},draw:draw})}var _regeneratorRuntime,_asyncToGenerator,_extends,d3,universe,debounce,gridDefaults,barChart,generatedColumns,columnDefs,_keySort;return{setters:[function(_npmSystemjsPluginBabel0012RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0012RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0012BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0012BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0012BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0012BabelHelpersExtendsJs.default},function(_d){d3=_d.default},function(_universe){universe=_universe.default},function(_lodash){debounce=_lodash.debounce},function(_commonServicesGridGridUtils){
gridDefaults=_commonServicesGridGridUtils.gridDefaults},function(_barChart){barChart=_barChart.default}],execute:function(){generatedColumns={day:function(d){return d3.time.format("%A")(d.date)},hour:function(d){return Number(d3.time.format("%H")(d.date))},dayOfWeek:function(d){return d3.time.format("%A")(d.date)},arrivalDelay:function(d){return 30*Math.floor(d.delay/30)},distances:function(d){return 100*Math.floor(d.distance/100)}},columnDefs=[{name:"date",type:"date",cellFilter:"date:'short'"},{name:"delay",displayName:"Arrival Delay",type:"number",cellTemplate:'\n      <div ng-class="{ early: COL_FIELD < 0}">\n        {{grid.getCellValue(row, col)}} min\n      </div>'},{name:"distance",displayName:"Distance",type:"number",cellTemplate:"\n      <div>\n        {{grid.getCellValue(row, col)}} mi.\n      </div>"},{name:"origin"},{name:"destination"}],_keySort=function(a,b){return Number(a.key>b.key)||Number(a.key===b.key)-1},controller.$inject=["$scope","$log","cfpLoadingBar"],_export("default",{controller:controller,templateUrl:"components/examples/universe/universe.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/examples/vega/bars.js",["vega/vega","vega-lite/vega-lite","mobx"],function(_export,_context){"use strict";function controller($log,dataService,growl){function draw(){var element=document.querySelector("#_examples_vega__chart"),config=$ctrl.dataPackage.resources[0].data,data=$ctrl.dataPackage.resources[1].data,spec=config.spec||{};spec.width=spec.width||element.clientWidth-20-(spec.padding?spec.padding.left+spec.padding.right:0),spec.height=spec.height||440/900*spec.width;try{"vega-lite"===config.mode?(spec.data.values=data,spec=vl.compile(spec).spec):spec.data[0].values=data,vg.parse.spec(spec,function(error,chart){error&&$log.error(error),chart({el:element,renderer:"svg"}).update()})}catch(err){$log.error(err),growl.error(err.message||err,{title:"Error processing Vega config"})}}var $ctrl=this;return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage},$onInit:function(){$log.debug("$onInit"),autorun(draw)}})}var vg,vl,autorun;return{setters:[function(_vegaVega){vg=_vegaVega.default},function(_vegaLiteVegaLite){vl=_vegaLiteVegaLite.default},function(_mobx){autorun=_mobx.autorun}],execute:function(){controller.$inject=["$log","dataService","growl"],_export("default",{controller:controller,templateUrl:"components/examples/vega/bars.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/examples/network/network.three-chart.js",["d3-selection","d3-scale","d3-dispatch","d3-tip","three","./network.d3-force"],function(_export,_context){"use strict";function ThreeNetwork(opts){opts=opts||{};var margin=opts.margin||{top:0,right:0,bottom:0,left:0},width=opts.width||"auto",height=opts.height||"auto",layout=opts.layout||v4force({}),radius=opts.radius||5,color=scaleOrdinal(schemeCategory20),renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),raycaster=new THREE.Raycaster,tip=d3tip().attr("class","d3-tip animate fixed").offset([0,0]).html(function(d){return""+d.name}),listeners=dispatch("mouseover","mouseout","contextmenu"),chart=function(selection){selection.each(function(graph){function getIntesection(mouse){raycaster.setFromCamera(mouse,camera);var intersects=raycaster.intersectObjects(nodes,!1);return intersects.length>0?graph.nodes[Number(intersects[0].object.name)]:null}function createNode(d){var size=2*radius,nodeGeometry=new THREE.CircleGeometry(size,size,void 0,void 0),nodeMaterial=new THREE.MeshBasicMaterial({color:color(d.group),transparent:!0,opacity:d.visible?1:.2}),mesh=new THREE.Mesh(nodeGeometry,nodeMaterial);return mesh.position.z=radius,mesh.name=d.id,mesh}function createLink(d){var linkGeometry=new THREE.Geometry;linkGeometry.vertices.push(new THREE.Vector3(0,0,0)),linkGeometry.vertices.push(new THREE.Vector3(0,0,0));var linkMaterial=new THREE.LineBasicMaterial({color:"#999",linewidth:Math.sqrt(d.value),transparent:!0,opacity:d.target.visible&&d.source.visible?1:.1});return new THREE.Line(linkGeometry,linkMaterial,void 0)}var container=this;"number"!=typeof width&&(width=this.parentNode.clientWidth-margin.left-margin.right,("number"!=typeof width||width<500)&&(width=500)),"number"!=typeof height&&(height=.625*width);var svg=d3.select(container).append("svg").style("position","absolute").style("width","1px").style("height","1px").style("pointer-events","none").call(tip);d3.select(container).call(layout.drag);var scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,width/height,1,1e4);camera.position.x=width,camera.position.y=-height,camera.position.z=940;var nodeData=graph.nodes,linkData=graph.links,nodes=nodeData.map(createNode),links=linkData.map(createLink);links.forEach(function(l){return scene.add(l)}),nodes.forEach(function(n){return scene.add(n)}),renderer.setSize(width,height,void 0),container.appendChild(renderer.domElement),layout.size([width,height]).nodes(nodeData).links(linkData).start(),layout.on("tick",function(){links.forEach(function(link,i){var d=linkData[i];link.geometry.vertices[0].set(2*d.source.x,2*-d.source.y,0),link.geometry.vertices[1].set(2*d.target.x,2*-d.target.y,0),link.geometry.verticesNeedUpdate=!0}),nodes.forEach(function(node,i){var d=nodeData[i];node.position.x=2*d.x,node.position.y=2*-d.y}),renderer.render(scene,camera,void 0,void 0)});var intersects=null;layout.drag.subject(function(){return intersects}),container.addEventListener("mousemove",function(event){var mouse=_getRelativeMouseXY(event);intersects=getIntesection(mouse),intersects?(svg.style("top",event.clientY-15+"px").style("left",event.clientX+"px"),tip.show(intersects,svg.node())):tip.hide()},!1),container.addEventListener("dblclick",function(event){intersects&&(event.preventDefault(),layout.fixed.call(null,intersects))})})};return chart.width=function(_){return arguments.length<1?width:(width=_,chart)},chart.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?chart:value},chart}function _getRelativeMouseXY(domEvent){var element=domEvent.target||domEvent.srcElement;3===element.nodeType&&(element=element.parentNode);var elPosition={x:0,y:0},tmpElement=element,style=getComputedStyle(tmpElement,null);elPosition.y+=parseInt(style.getPropertyValue("padding-top"),10),elPosition.x+=parseInt(style.getPropertyValue("padding-left"),10);do elPosition.x+=tmpElement.offsetLeft,elPosition.y+=tmpElement.offsetTop,style=getComputedStyle(tmpElement,null),elPosition.x+=parseInt(style.getPropertyValue("border-left-width"),10),elPosition.y+=parseInt(style.getPropertyValue("border-top-width"),10),tmpElement=tmpElement.offsetParent;while(tmpElement);var elDimension={width:element===window?window.innerWidth:element.offsetWidth,height:element===window?window.innerHeight:element.offsetHeight};return{x:2*Number(domEvent.pageX-elPosition.x)/elDimension.width-1,y:-2*Number(domEvent.pageY-elPosition.y)/elDimension.height+1}}var d3,scaleOrdinal,schemeCategory20,dispatch,d3tip,THREE,v4force;return _export("default",ThreeNetwork),{setters:[function(_d3Selection){d3=_d3Selection},function(_d3Scale){scaleOrdinal=_d3Scale.scaleOrdinal,schemeCategory20=_d3Scale.schemeCategory20},function(_d3Dispatch){dispatch=_d3Dispatch.dispatch},function(_d3Tip){d3tip=_d3Tip.default},function(_three){THREE=_three},function(_networkD3Force){v4force=_networkD3Force.v4force}],execute:function(){}}}),System.register("components/examples/network/network.d3v4-chart.js",["d3-selection","d3-scale","d3-tip","./network.d3-force"],function(_export,_context){"use strict";function Network(opts){function chart(selection){selection.each(function(graph){var container=d3.select(this);"number"!=typeof width&&(width=this.parentNode.clientWidth-margin.left-margin.right,("number"!=typeof width||width<500)&&(width=500)),"number"!=typeof height&&(height=.625*width);var svg=container.selectAll("svg").data([graph]).enter().append("svg").attr("title",title).attr("width",width).attr("height",height);svg.call(tip);var nodeData=graph.nodes,linkData=graph.links;layout.size([width,height]).nodes(nodeData).links(linkData).start();var link=svg.selectAll(".link").data(linkData).enter().append("line").attr("class","link").style("opacity",function(d){return d.target.visible&&d.source.visible?1:.1}).style("stroke-width",function(d){return Math.sqrt(d.value)}),node=svg.selectAll(".node").data(nodeData).enter().append("circle").attr("class","node").classed("fixed",function(d){return d.fixed}).attr("r",radius).style("fill",function(d){return color(d.group)}).style("opacity",function(d){return d.visible?1:.2}).on("mouseover",tip.show).on("mouseout",tip.hide).on("dblclick",layout.fixed);node.call(layout.drag),node.append("title").text(function(d){return d.name}),layout.on("tick",function(){link.attr("x1",function(d){return d.source.x}).attr("y1",function(d){return d.source.y}).attr("x2",function(d){return d.target.x}).attr("y2",function(d){return d.target.y}),node.attr("cx",function(d){return d.x}).attr("cy",function(d){return d.y})})})}opts=opts||{};var margin=opts.margin||{top:0,right:0,bottom:0,left:0},width=opts.width||"auto",height=opts.height||"auto",title=opts.title||"Network",layout=opts.layout||v4force({}),radius=opts.radius||5,color=scaleOrdinal(schemeCategory20),tip=d3Tip().attr("class","d3-tip animate").offset([-10,0]).html(function(d){return""+d.name});return chart}var d3,scaleOrdinal,schemeCategory20,d3Tip,v4force;return _export("default",Network),{setters:[function(_d3Selection){d3=_d3Selection},function(_d3Scale){scaleOrdinal=_d3Scale.scaleOrdinal,schemeCategory20=_d3Scale.schemeCategory20},function(_d3Tip){d3Tip=_d3Tip.default},function(_networkD3Force){v4force=_networkD3Force.v4force}],execute:function(){}}}),System.register("components/examples/network/network.d3-force.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/slicedToArray.js","d3","d3-selection","d3-force","d3-drag"],function(_export,_context){"use strict";function v3force(){function chain(fn){return function(){return fn.apply(this,arguments),api}}function fixed(d){d.fixed=!d.fixed,null!==this&&d3.select(this).classed("fixed",d.fixed)}function dragstarted(d){d=d3.event.subject||d,d.fixed|=2}function dragged(d){d=d3.event.subject||d,d.px=d3.event.x,d.py=d3.event.y,force.resume()}function dragended(d){d=d3.event.subject||d,d.fixed&=-7}var force=d3v3.layout.force().charge(-120).linkDistance(30),nodeDrag=drag().on("start",dragstarted).on("drag",dragged).on("end",dragended),api={nodes:chain(force.nodes),links:chain(force.links),drag:nodeDrag,fixed:fixed,on:chain(force.on),size:chain(force.size),start:chain(force.start)};return api}function v4force(){function chain(fn){return function(){return fn.apply(this,arguments),api}}function fixed(d){d.fixed=!d.fixed,d.fx=d.fixed?d.x:null,d.fy=d.fixed?d.y:null,null!==this&&d3.select(this).classed("fixed",d.fixed)}function dragstarted(d){d=d3.event.subject||d,d3.event.active||simulation.alphaTarget(.3).restart(),d.fx=d.x,d.fy=d.y}function dragged(d){d=d3.event.subject||d,d.fx=d3.event.x,d.fy=d3.event.y}function dragended(d){d=d3.event.subject||d,d3.event.active||simulation.alphaTarget(0),d.fx=d.fixed?d.x:null,d.fy=d.fixed?d.y:null}var link=forceLink(),simulation=forceSimulation().force("charge",forceManyBody()).force("link",link),nodeDrag=drag().on("start",dragstarted).on("drag",dragged).on("end",dragended),api={nodes:chain(simulation.nodes.bind(simulation)),links:chain(link.links.bind(link)),drag:nodeDrag,fixed:fixed,on:chain(simulation.on),size:function(_ref){var _ref2=_slicedToArray(_ref,2),width=_ref2[0],height=_ref2[1];return simulation.force("center",forceCenter(width/2,height/2)),api},start:chain(function(){})};return api}var _slicedToArray,d3v3,d3,forceSimulation,forceManyBody,forceCenter,forceLink,drag;return{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0012BabelHelpersSlicedToArrayJs.default},function(_d){d3v3=_d.default},function(_d3Selection){d3=_d3Selection},function(_d3Force){forceSimulation=_d3Force.forceSimulation,forceManyBody=_d3Force.forceManyBody,forceCenter=_d3Force.forceCenter,forceLink=_d3Force.forceLink},function(_d3Drag){drag=_d3Drag.drag}],execute:function(){_export("v3force",v3force),_export("v4force",v4force)}}}),System.register("components/examples/network/network.component.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/extends.js","d3","./network.less!","d3-tip/examples/example-styles.css!","./network.three-chart","./network.d3v4-chart","./network.d3-force"],function(_export,_context){"use strict";function controller(){function $onInit(){$ctrl.data=processData($ctrl.dataPackage.resources[0].data),$ctrl.names=$ctrl.data.nodes.map(function(d){return d.name}),makeChart()}function applyFilter(filter){var fn=function(d){d.visible=!0};Array.isArray(filter.name)&&filter.name.length>0&&!function(){var names=filter.name.map(function(d){return d.toLowerCase()});fn=function(d){var name=d.name.toLowerCase();d.visible=names.some(function(d){return name.indexOf(d)>-1})}}(),$ctrl.data.nodes.forEach(fn),makeChart()}function processData(data){var nodes=data.nodes.map(function(d,id){return _extends({},d,{id:id,outdegree:0,indegree:0,visible:!0})}),links=data.links.map(function(d){var source=nodes[d.source],target=nodes[d.target];return source.outdegree++,source.degree++,target.indegree++,target.degree++,_extends({},d,{source:nodes[d.source],target:nodes[d.target]})});return{nodes:nodes,links:links}}function makeChart(){chart=chartConstructors[$ctrl.selectedChart]({layout:layoutConstructors[$ctrl.selectedLayout]({})}),$ctrl.editorOptions.enableSvgDownload="WebGL"!==$ctrl.selectedChart,draw()}function draw(){var container=d3.select("#_network__chart");container.selectAll("div").remove();var divs=container.selectAll("div").data([$ctrl.data]);divs.enter().append("div"),divs.exit().remove(),divs.call(chart)}var $ctrl=this,chart=void 0;return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,enableOpen:!0,enableSvgDownload:!1,enablePngDownload:!1,onChange:$onInit},charts:Object.keys(chartConstructors),layouts:Object.keys(layoutConstructors),selectedChart:"SVG",selectedLayout:"d3-force v4",filter:{},$onInit:$onInit,applyFilter:applyFilter,makeChart:makeChart})}var _extends,d3,threeChart,d3v4Chart,v3force,v4force,chartConstructors,layoutConstructors;return{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0012BabelHelpersExtendsJs.default},function(_d){d3=_d.default},function(_networkLess){},function(_d3TipExamplesExampleStylesCss){},function(_networkThreeChart){threeChart=_networkThreeChart.default},function(_networkD3v4Chart){d3v4Chart=_networkD3v4Chart.default},function(_networkD3Force){v3force=_networkD3Force.v3force,v4force=_networkD3Force.v4force}],execute:function(){chartConstructors={SVG:d3v4Chart,WebGL:threeChart},layoutConstructors={"d3-force v3":v3force,"d3-force v4":v4force},_export("default",{controller:controller,templateUrl:"components/examples/network/network.template.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/examples/routes.js",["angular","common/services/grid/grid","common/services/facets/facets","ui-select/dist/select","ui-select/dist/select.css!","components/examples/index","components/examples/chiasm/chiasm","components/examples/biojs/biojs","components/examples/bars/bars","components/examples/treemap/treemap","components/examples/sunburst/sunburst","components/examples/polymer/bar-chart","components/examples/universe/universe","components/examples/vega/bars","./network/network.component","d3-plugins/hexbin/hexbin"],function(_export,_context){"use strict";var angular,grid,facets,examplesComponent,chiasmComponent,bioJSComponent,barsComponent,treemapComponent,sunburstComponent,polymerComponent,universeComponent,vegaComponent,networkComponent;return{setters:[function(_angular){angular=_angular.default},function(_commonServicesGridGrid){grid=_commonServicesGridGrid.default},function(_commonServicesFacetsFacets){facets=_commonServicesFacetsFacets.default},function(_uiSelectDistSelect){},function(_uiSelectDistSelectCss){},function(_componentsExamplesIndex){examplesComponent=_componentsExamplesIndex.default},function(_componentsExamplesChiasmChiasm){chiasmComponent=_componentsExamplesChiasmChiasm.default},function(_componentsExamplesBiojsBiojs){bioJSComponent=_componentsExamplesBiojsBiojs.default},function(_componentsExamplesBarsBars){barsComponent=_componentsExamplesBarsBars.default},function(_componentsExamplesTreemapTreemap){treemapComponent=_componentsExamplesTreemapTreemap.default},function(_componentsExamplesSunburstSunburst){sunburstComponent=_componentsExamplesSunburstSunburst.default},function(_componentsExamplesPolymerBarChart){polymerComponent=_componentsExamplesPolymerBarChart.default},function(_componentsExamplesUniverseUniverse){universeComponent=_componentsExamplesUniverseUniverse.default},function(_componentsExamplesVegaBars){vegaComponent=_componentsExamplesVegaBars.default},function(_networkNetworkComponent){networkComponent=_networkNetworkComponent.default},function(_d3PluginsHexbinHexbin){}],execute:function(){_export("default",angular.module("examples",["projectX.dataService",grid,facets,"ui.select"]).component("bars",barsComponent).component("examples",examplesComponent).component("biojs",bioJSComponent).component("chiasm",chiasmComponent).component("network",networkComponent).component("polymer",polymerComponent).component("treemapPage",treemapComponent).component("sunburstPage",sunburstComponent).component("universe",universeComponent).component("vega",vegaComponent).config(["$routeProvider",function($routeProvider){$routeProvider.when("/examples",{template:'<examples data-package="$resolve.dataPackage"></examples>',datapackageUrl:"components/examples/datapackage.json"}).when("/examples/chiasm",{template:'<chiasm data-package="$resolve.dataPackage"></chiasm>',datapackageUrl:"components/examples/chiasm/datapackage.json"}).when("/examples/biojs",{template:'<biojs data-package="$resolve.dataPackage"></biojs>',datapackageUrl:"components/examples/biojs/datapackage.json"}).when("/examples/bars",{template:'<bars data-package="$resolve.dataPackage"></bars>',datapackageUrl:"components/examples/bars/datapackage.json"}).when("/examples/treemap",{template:'<treemap-page data-package="$resolve.dataPackage"></treemap-page>',datapackageUrl:"components/examples/treemap/datapackage.json"}).when("/examples/sunburst",{template:'<sunburst-page data-package="$resolve.dataPackage"></sunburst-page>',datapackageUrl:"components/examples/sunburst/datapackage.json"}).when("/examples/polymer",{template:'<polymer data-package="$resolve.dataPackage"></polymer>',datapackageUrl:"components/examples/polymer/datapackage.json"}).when("/examples/vega",{template:'<vega data-package="$resolve.dataPackage"></vega>',datapackageUrl:"components/examples/vega/datapackage.json"}).when("/examples/universe",{template:'<universe data-package="$resolve.dataPackage"></universe>',datapackageUrl:"components/examples/universe/datapackage.json"}).when("/examples/network",{template:'<network data-package="$resolve.dataPackage"></network>',datapackageUrl:"components/examples/network/datapackage.json"})}]))}}}),System.register("components/extra/trains/trains-chart.js",["d3"],function(_export,_context){"use strict";function Chart(opts){return opts=opts||{},function(selection){selection.each(function(d){function type(d,i){if(!i)for(var k in d)if(/^stop\|/.test(k)){var p=k.split("|");stations.push({key:k,name:p[1],distance:Number(p[2]),zone:Number(p[3])})}return{number:d.number,type:d.type,direction:d.direction,stops:stations.map(function(s){return{station:s,time:parseTime(d[s.key])}}).filter(function(s){return null!=s.time})}}function parseTime(s){var t=formatTime.parse(s);return null!=t&&t.getHours()<3&&t.setDate(t.getDate()+1),t}var el=d3.select(this);el.selectAll("svg").remove();var stations=[],formatTime=d3.time.format("%I:%M%p"),margin={top:20,right:30,bottom:20,left:100},width=960-margin.left-margin.right,height=500-margin.top-margin.bottom,x=d3.time.scale().domain([parseTime("5:30AM"),parseTime("11:30AM")]).range([0,width]),y=d3.scale.linear().range([0,height]),z=d3.scale.linear().domain([1e-4,3e-4]).range(["purple","orange"]).interpolate(d3.interpolateLab),xAxis=d3.svg.axis().scale(x).ticks(8).tickFormat(formatTime),svg=el.append("svg").attr("title","Marey’s Trains").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");svg.append("defs").append("clipPath").attr("id","clip").append("rect").attr("y",-margin.top).attr("width",width).attr("height",height+margin.top+margin.bottom);var trains=d.map(type);y.domain(d3.extent(stations,function(d){return d.distance}));var station=svg.append("g").attr("class","station").selectAll("g").data(stations).enter().append("g").attr("transform",function(d){return"translate(0,"+y(d.distance)+")"});station.append("text").attr("x",-6).attr("dy",".35em").attr("text-anchor","end").text(function(d){return d.name}),station.append("line").attr("x2",width),svg.append("g").attr("class","x top axis").call(xAxis.orient("top")),svg.append("g").attr("class","x bottom axis").attr("transform","translate(0,"+height+")").call(xAxis.orient("bottom"));var train=svg.append("g").attr("class","train").attr("clip-path","url(#clip)").selectAll("g").data(trains.filter(function(d){return/[NLB]/.test(d.type)})).enter().append("g").attr("class",function(d){return d.type});train.selectAll("line").data(function(d){return d.stops.slice(1).map(function(b,i){return[d.stops[i],b]})}).enter().append("line").attr("x1",function(d){return x(d[0].time)}).attr("x2",function(d){return x(d[1].time)}).attr("y1",function(d){return y(d[0].station.distance)}).attr("y2",function(d){return y(d[1].station.distance)}).style("stroke",function(d){return z(Math.abs((d[1].station.distance-d[0].station.distance)/(d[1].time-d[0].time)))}),train.selectAll("circle").data(function(d){return d.stops}).enter().append("circle").attr("transform",function(d){return"translate("+x(d.time)+","+y(d.station.distance)+")"}).attr("r",2)})}}var d3;return _export("default",Chart),{setters:[function(_d){d3=_d.default}],execute:function(){}}}),System.registerDynamic("components/extra/trains/trains.css!github:systemjs/plugin-css@0.1.30/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.register("components/extra/trains/trains.js",["d3","./trains-chart","./trains.css!"],function(_export,_context){"use strict";function controller(){function draw(){var data=$ctrl.dataPackage.resources.map(function(d){return d.data}),divs=d3.select("#_examples_trains__chart").selectAll("div").data(data);divs.enter().append("div"),divs.exit().remove(),divs.call(chart)}var $ctrl=this,chart=new Chart;Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:draw},draw:draw,$onInit:draw})}var d3,Chart;return{setters:[function(_d){d3=_d.default},function(_trainsChart){Chart=_trainsChart.default},function(_trainsCss){}],execute:function(){_export("default",{controller:controller,templateUrl:"components/extra/trains/trains.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/extra/hexbin/hexbin.js",["d3","d3-plugins/hexbin/hexbin"],function(_export,_context){"use strict";function controller($scope){$scope.options={};var width=960,height=500,i=-1,θ=0,δθ=.03,n=2e3,k=20,svg=d3.select("#chart").append("svg").attr("title","hexbins").attr("width",width).attr("height",height),randomX=d3.random.normal(width/2,80),randomY=d3.random.normal(height/2,80),points=d3.range(n).map(function(){return[randomX(),randomY()]}),color=d3.scale.linear().domain([0,20]).range(["white","steelblue"]).interpolate(d3.interpolateLab),hexbin=d3.hexbin().size([width,height]).radius(20),hexagon=svg.append("g").attr("class","hexagons").selectAll("path").data(hexbin(points)).enter().append("path").attr("d",hexbin.hexagon(19.5)).attr("transform",function(d){return"translate("+d.x+","+d.y+")"}).style("fill",function(d){return color(d.length)});d3.timer(function(){θ+=δθ,randomX=d3.random.normal(width/2+80*Math.cos(θ),80),randomY=d3.random.normal(height/2+80*Math.sin(θ),80);for(var j=0;j<k;++j)i=(i+1)%n,points[i][0]=randomX(),points[i][1]=randomY();hexagon=hexagon.data(hexbin(points),function(d){return d.i+","+d.j}),hexagon.exit().remove(),hexagon.enter().append("path").attr("d",hexbin.hexagon(19.5)).attr("transform",function(d){return"translate("+d.x+","+d.y+")"}),hexagon.style("fill",function(d){return color(d.length)})})}var d3;return{setters:[function(_d){d3=_d.default},function(_d3PluginsHexbinHexbin){}],execute:function(){_export("default",{controller:["$scope",controller],templateUrl:"components/extra/hexbin/hexbin.html"})}}}),System.register("components/extra/extra-index.html!github:systemjs/plugin-text@0.0.8/text.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",'<div class="row _common_styles_index__index">\n\n  <h2 class="title">{{$ctrl.dataPackage.title}}</h2>\n  <p class="lead" marked="$ctrl.dataPackage.description"></p>\n\n  <div class="row">\n    <div class="col-md-4" ng-repeat="(filename,file) in $ctrl.dataPackage.resources" ng-if="file.data">\n      <a ng-href="{{file.link}}">\n        <div class="card" style="background-image: url({{file.data.image}});">\n          <div>\n            <h3>{{file.data.name}}</h3>\n            <p marked="file.data.description"></p>\n          </div>\n        </div>\n      </a>\n    </div>\n  </div>\n\n  <div class="col-md-12" marked src="$ctrl.dataPackage.readme"></p>\n</div>\n')}}}),System.register("components/extra/extra-index.js",["common/styles/index.css!","./extra-index.html!text"],function(_export,_context){"use strict";function controller(dataService){this.dataPackage.resources.forEach(function(resource){dataService.normalizePackage(resource.url,resource.data)})}var template;return{setters:[function(_commonStylesIndexCss){},function(_extraIndexHtmlText){template=_extraIndexHtmlText.default}],execute:function(){controller.$inject=["dataService"],_export("default",{controller:controller,template:template,bindings:{dataPackage:"<package"}})}}}),System.register("components/extra/extra-routes.js",["angular","./trains/trains","./hexbin/hexbin","./extra-index"],function(_export,_context){"use strict";function routeConfig($routeProvider){$routeProvider.when("/extra",{template:'<extra data-package="$resolve.dataPackage"></extra>',datapackageUrl:"components/extra/datapackage.json"}).when("/extra/trains",{template:'<trains data-package="$resolve.dataPackage"></trains>',datapackageUrl:"components/extra/trains/datapackage.json"}).when("/extra/hexbin",{template:"<hexbin></hexbin>"}).otherwise({redirectTo:"/"})}var angular,trainsComponent,hexbinComponent,extraIndexComponent;return{setters:[function(_angular){angular=_angular.default},function(_trainsTrains){trainsComponent=_trainsTrains.default},function(_hexbinHexbin){hexbinComponent=_hexbinHexbin.default},function(_extraIndex){extraIndexComponent=_extraIndex.default}],execute:function(){routeConfig.$inject=["$routeProvider"],_export("default",angular.module("extra",["projectX.dataService"]).component("extra",extraIndexComponent).component("trains",trainsComponent).component("hexbin",hexbinComponent).config(routeConfig))}}}),System.registerDynamic("common/styles/index.css!github:systemjs/plugin-css@0.1.30/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.register("components/index/index.js",["common/styles/index.css!"],function(_export,_context){"use strict";function controller(dataService){var $ctrl=this;$ctrl.sets=this.dataPackage.resources.map(function(set){var url=dataService.normalize.datapackage({url:set.url}).url;return dataService.loadPackage(url).then(function(p){set.pages=p.resources.map(function(res){var page=res.data;return res.url&&(page.url=res.url,page=dataService.normalize.datapackage(page)),page.link=res.link,page})}),set})}return{setters:[function(_commonStylesIndexCss){}],execute:function(){controller.$inject=["dataService"],_export("default",{controller:controller,templateUrl:"components/index/index.html",datapackageUrl:"components/index/datapackage.json",bindings:{dataPackage:"<package"}})}}}),System.registerDynamic("components/about/about.md!github:Hypercubed/system-md-marked@1.0.1/md.js",[],!0,function($__require,exports,module){this||self;return module.exports='<h1 id="about-project-">About Project χ</h1>\n<p>This website was built using the Project χ platform. Project χ (pronounced project kai or /<abbr title="/ˈ/ primary stress follows">ˈ</abbr><abbr title="\'k\' in \'kind\'">k</abbr><abbr title="/iː/ long \'e\' in \'bead\'">iː</abbr>/) is an modular open source visualization gallery framework built by Jayson Harshbarger at the <a href="http://www.yokohama.riken.jp/english/">RIKEN Institute in Yokohama Japan</a>.  It offers a framework and toolset for building self-hosted data-centric visualization websites. Geared towards sharing of supplemental materials associated with scientific publications; Project χ allows visitors to interact with visualizations, download associated data and images, and even try the visualization with their own uploaded or publicly available datasets.  For developers the framework comes packaged with tools necessary for quickly integrating interactive visualizations using <a href="http://d3js.org/">d3.js</a>, <a href="https://angularjs.org/">AngularJS</a>, and <a href="http://biojs.io/">BioJS</a>. Features of the framework include:</p>\n<ul>\n<li>Simple,  modular, and customizable design using <a href="https://angularjs.org/">AngularJS</a> templates and <a href="http://getbootstrap.com/">bootstrap</a> CSS framework.</li>\n<li>Supports CommonJS, AMD, and ES6 modules using the <a href="https://github.com/systemjs/systemjs">SystemJS</a> Universal dynamic module loader.</li>\n<li>Integrate additional visualizations, including <a href="http://biojs.io/">BioJS</a> and <a href="https://github.com/curran/chiasm">Chiasm</a> modules, directly from any registry such as <a href="https://www.npmjs.com">NPM</a> or <a href="https://github.com/">GitHub</a> using <a href="http://jspm.io/">JSPM</a>.</li>\n<li>Self-hosted fully client-side application doesn&#39;t require a server; easily hosted on <a href="https://en.wikipedia.org/wiki/WebDAV">WebDAV</a> or <a href="https://pages.github.com/">GitHub Pages</a>.</li>\n<li>Contains AngularJS services and directives for loading, parsing, and downloading data and as well as downloading generated publication quality SVG images.</li>\n</ul>\n',module.exports}),System.register("components/routes.js",["angular","./fantom5/routes","./examples/routes","./extra/extra-routes","./index/index","./about/about.md!md"],function(_export,_context){"use strict";function configRoutes($routeProvider){$routeProvider.when("/about",{template:aboutHTML}).when("/",{template:'<index data-package="$resolve.dataPackage"></index>',datapackageUrl:"components/index/datapackage.json"}).otherwise({redirectTo:"/"})}var angular,fantom,examples,extra,indexComponent,aboutHTML;return{setters:[function(_angular){angular=_angular.default},function(_fantom5Routes){fantom=_fantom5Routes.default},function(_examplesRoutes){examples=_examplesRoutes.default},function(_extraExtraRoutes){extra=_extraExtraRoutes.default},function(_indexIndex){indexComponent=_indexIndex.default},function(_aboutAboutMdMd){aboutHTML=_aboutAboutMdMd.default}],execute:function(){configRoutes.$inject=["$routeProvider"],_export("default",angular.module("routes",["projectX.dataService",fantom.name,examples.name,extra.name]).component("index",indexComponent).config(configRoutes));
}}}),System.register("common/directives/svg-download-dropdown.js",["angular-downloadsvg-directive"],function(_export,_context){"use strict";function link(scope,element,attr){function getSVGs(){var el=attr.svgDownloadDropdown?angular.element(document.querySelector(sAttr[1])):element.parent,svgs=el.find("svg"),ids=[];angular.forEach(svgs,function(svg,d){var elm=angular.element(svg),id=elm.attr("id")||"svg-"+d,title=elm.attr("title")||id,o={id:id,title:title};elm.attr(o),ids.push(o)}),scope[sAttr[0]]=ids}var sAttr=attr.svgDownloadDropdown.split(/\sin\s/);getSVGs(),element.on("click",function(){scope.$apply(function(){getSVGs()})})}var module;return{setters:[function(_angularDownloadsvgDirective){}],execute:function(){module=angular.module("svgDownloadDropdown",["hc.downloader"]).directive("svgDownloadDropdown",function(){return{link:link}}).run(["$rootScope","cfpLoadingBar","$log",function($rootScope,cfpLoadingBar,$log){$rootScope.$on("$svgSaver:start",function(){$log.debug("$svgSaver:start"),cfpLoadingBar.start()}),$rootScope.$on("$svgSaver:end",function(){cfpLoadingBar.complete()}),$rootScope.$on("$svgSaver:error",function(){cfpLoadingBar.complete()})}]),_export("default",module.name)}}}),System.register("common/directives/file-drop.js",["angular","common/services/datapackage/datapackage"],function(_export,_context){"use strict";function fileReadService($log,growl){var service={processFile:function(file,scope){var reader=new FileReader;reader.onload=function(evt){file.content=evt.target.result;var type=file.type||dp.mime.lookup(file.name);if(service.checkSize(file.size,scope)&&service.checkType(type,scope))return scope.$apply(function(){scope.onReadFile({file:file})})},reader.readAsText(file)},checkSize:function(size,opts){var _ref=opts.maxFileSize;return void 0===_ref||""===_ref||size/1024/1024<opts.maxFileSize||(growl.error("File must be smaller than "+opts.maxFileSize+" MB"),!1)},checkType:function(type,opts){return void 0===opts.validMimeTypes||""===opts.validMimeTypes||opts.validMimeTypes.indexOf(type)>-1||(growl.error("Invalid file type "+type+".  File must be one of following types "+opts.validMimeTypes),!1)}};return service}function onReadFileDirective(fileRead){return{restrict:"A",scope:{onReadFile:"&",validMimeTypes:"@accept",maxFileSize:"@"},link:function(scope,element){return element.on("change",function(event){null!==event&&event.preventDefault();for(var files=(event.srcElement||event.target).files,i=0;i<files.length;i++)fileRead.processFile(files[i],scope)})}}}function fileDropzoneDirective(fileRead){return{restrict:"A",scope:{onReadFile:"&dropped",validMimeTypes:"@fileDropzone",maxFileSize:"@"},link:function(scope,element){function processDragOverOrEnter(event){return null!==event&&event.preventDefault(),element.addClass("hover"),(event.dataTransfer||event.originalEvent.dataTransfer).effectAllowed="copy",!1}function processDragLeave(event){return null!==event&&event.preventDefault(),element.removeClass("hover"),!1}return element.bind("dragover",processDragOverOrEnter),element.bind("dragenter",processDragOverOrEnter),element.bind("dragleave",processDragLeave),element.bind("drop",function(event){null!==event&&event.preventDefault(),element.removeClass("hover");for(var files=(event.dataTransfer||event.originalEvent.dataTransfer).files,i=0;i<files.length;i++){var file=files[i];fileRead.processFile(file,scope)}return!1})}}}var angular,dp;return _export("fileReadService",fileReadService),{setters:[function(_angular){angular=_angular.default},function(_commonServicesDatapackageDatapackage){dp=_commonServicesDatapackageDatapackage.default}],execute:function(){fileReadService.$inject=["$log","growl"],onReadFileDirective.$inject=["fileRead"],fileDropzoneDirective.$inject=["fileRead"],_export("default",angular.module("projectX.fileDrop",["angular-growl"]).service("fileRead",fileReadService).directive("onReadFile",onReadFileDirective).directive("fileDropzone",fileDropzoneDirective).name)}}}),System.register("common/directives/file-download.js",["angular","FileSaver/FileSaver.js","blobjs/Blob.js"],function(_export,_context){"use strict";var angular,saveAs,module;return{setters:[function(_angular){angular=_angular.default},function(_FileSaverFileSaverJs){saveAs=_FileSaverFileSaverJs.default},function(_blobjsBlobJs){}],execute:function(){module=angular.module("projectX.fileDownload",[]).directive("fileDownload",function(){return{scope:{file:"=fileDownload"},link:function(scope,element){function download(file){var mime=file.type||"text/plain",type=mime+";charset=utf-8",filename=file.name||"download.txt",blob=new Blob([file.content],{type:type});saveAs(blob,filename)}element.bind("click",function(){download(scope.file)})}}}),_export("default",module.name)}}}),System.register("common/services/datapackage/resolver.js",["angular"],function(_export,_context){"use strict";var angular;return _export("default",function(route){var hasDatapackageResolve=angular.isDefined(route.resolve)&&angular.isDefined(route.resolve.dataPackage);return hasDatapackageResolve||(angular.isDefined(route.datapackage)?(route.resolve=route.resolve||{},angular.extend(route.resolve,{dataPackage:["$route","dataService",function($route,dataService){var datapackage="function"==typeof route.datapackage?route.datapackage($route.current.params):route.datapackage,base=datapackage.base||route.datapackageUrl;return dataService.processPackage(base,datapackage)}]})):angular.isDefined(route.datapackageUrl)&&(route.resolve=route.resolve||{},angular.extend(route.resolve,{dataPackage:["$route","dataService",function($route,dataService){var datapackageUrl="function"==typeof route.datapackageUrl?route.datapackageUrl($route.current.params):route.datapackageUrl;return dataService.loadPackage(datapackageUrl)}]}))),route}),{setters:[function(_angular){angular=_angular.default}],execute:function(){}}}),System.register("common/services/datapackage/dataservice.js",["npm:systemjs-plugin-babel@0.0.12/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/asyncToGenerator.js","mobx","./datapackage"],function(_export,_context5){"use strict";function run($http){dp.loader.fetch=function(url){return $http({url:url,method:"GET",cache:!1,transformResponse:function(data){return data}}).then(function(res){return res.data})}}function dataservice($log,growl){function __processResource(resource){var processed=toJS(Object.assign({},resource,{$error:null,errors:[],data:[]}));try{processed=dp.processor.resource(processed),processed.errors&&processed.errors.length>0&&(processed.$error=new Error("Errors processing resource "+processed.name))}catch(err){processed.$error=err,processed.errors=processed.errors||[],processed.errors.shift({code:"Parsing",type:err.name,message:"Parsing error: "+err.message})}return processed.$error||processed.errors.length>0?(resource.errors=processed.errors,resource.$error=processed.$error,resource.$error.message=resource.name,resource.$valid=!1,dataservice.warn(resource.$error,{title:"Error processing resource"})):(resource.errors=[],resource.$error=null,resource.data=processed.data,resource.$lastValidContent=toJS(resource.content)),resource}function __normalizePackage(url,datapackage){return 2===arguments.length?Object.assign(datapackage,{url:url}):datapackage=url,dp.normalizePackage(datapackage)}function makePackage(datapackage){return isObservable(datapackage)?datapackage:(datapackage=new Package(datapackage),autorun(function(){datapackage.resources.forEach(function(resource){if(resource.errors&&resource.errors.length>0)return dataservice.error("Errors processing resource "+resource.name,{title:"Error processing DataPackage"})})}),datapackage)}DEBUG&&!function(){var processResource=dp.processor.resource.bind(dp.processor);dp.processor.resource=function(resource){console.time(resource.name),$log.debug("Processing",resource.name);var r=processResource(resource);return console.timeEnd(resource.name),r};var index=dp.Normalizer.index.bind(dp.Normalizer);dp.Normalizer.index=function(datapackage){return $log.debug("Re-indexing",datapackage.name),index(datapackage)}}();var dataservice={dp:dp,normalize:dp.normalize,mime:dp.normalize.mime,translators:dp.processor.translators,index:dp.Normalizer.index,warn:function(err,opts){$log.warn(err),growl.warning(err.message||String(err),opts)},error:function(err,opts){return $log.error(err),growl.error(err.message||String(err),opts),Promise.reject(err)},loadPackage:function(datapackage){var _this=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var msg;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,transaction(function(){return makePackage(datapackage).load()});case 3:return _context.abrupt("return",_context.sent);case 6:return _context.prev=6,_context.t0=_context.catch(0),msg=_context.t0.status?_context.t0.statusText+"; "+_context.t0.data:String(_context.t0),_context.abrupt("return",dataservice.error(msg,{title:"Error loading DataPackage"}));case 10:case"end":return _context.stop()}},_callee,_this,[[0,6]])}))()},processPackage:function(url,datapackage){var _this2=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,makePackage(url).update(datapackage);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}},_callee2,_this2)}))()},loadResource:function(datapackage,res){var _this3=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var msg;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=3,transaction(function(){return makeResource(datapackage,res).load()});case 3:return _context3.abrupt("return",_context3.sent);case 6:return _context3.prev=6,_context3.t0=_context3.catch(0),msg=_context3.t0.status?_context3.t0.statusText+"; "+_context3.t0.data:String(_context3.t0),_context3.abrupt("return",dataservice.error(msg,{title:"Error loading resource"}));case 10:case"end":return _context3.stop()}},_callee3,_this3,[[0,6]])}))()},normalizeResource:function(p,r){return Object.assign(r,dp.normalize.resource(p,r))},processResource:__processResource,normalizePackage:__normalizePackage,reloadResource:function(resource){var _this4=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.prev=0,_context4.t0=Object,_context4.t1=resource,_context4.next=5,dp.loader.resource(resource);case 5:return _context4.t2=_context4.sent,_context4.t0.assign.call(_context4.t0,_context4.t1,_context4.t2),_context4.abrupt("return",dp.processResource(resource));case 10:return _context4.prev=10,_context4.t3=_context4.catch(0),$log.error(_context4.t3),_context4.abrupt("return",resource);case 14:case"end":return _context4.stop()}},_callee4,_this4,[[0,10]])}))()},makeResourceObservable:makeResource,makePackageObservable:makePackage};return dataservice}var _regeneratorRuntime,_asyncToGenerator,toJS,autorun,isObservable,transaction,dp,Package,makeResource,DEBUG;return _export("run",run),_export("dataservice",dataservice),{setters:[function(_npmSystemjsPluginBabel0012RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0012RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0012BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0012BabelHelpersAsyncToGeneratorJs.default},function(_mobx){toJS=_mobx.toJS,autorun=_mobx.autorun,isObservable=_mobx.isObservable,transaction=_mobx.transaction},function(_datapackage){dp=_datapackage.default,Package=_datapackage.Package,makeResource=_datapackage.makeResource}],execute:function(){DEBUG=!System.production,run.$inject=["$http"],dataservice.$inject=["$log","growl"]}}}),System.register("common/services/datapackage/index.js",["angular","./resolver","./dataservice"],function(_export,_context){"use strict";var angular,addDataPackageResolver,run,dataservice,module;return{setters:[function(_angular){angular=_angular.default},function(_resolver){addDataPackageResolver=_resolver.default},function(_dataservice){run=_dataservice.run,dataservice=_dataservice.dataservice}],execute:function(){module=angular.module("projectX.dataService",["ngRoute"]).service("dataService",dataservice).run(run).decorator("$route",["$delegate",function($delegate){return angular.forEach($delegate.routes,addDataPackageResolver),$delegate}]),_export("default",module.name)}}}),System.registerDynamic("common/services/datapackage/datapackage.js",["chi-datapackage/dist/store","chi-datapackage/dist/normalizer"],!0,function($__require,exports,module){this||self;const store=$__require("chi-datapackage/dist/store"),Normalizer=$__require("chi-datapackage/dist/normalizer"),dataPackageService=store.dataPackageService;return dataPackageService.Normalizer=Normalizer,dataPackageService.Resource=store.Resource,dataPackageService.Package=store.Package,dataPackageService.makeResource=store.makeResource,dataPackageService.makePackage=store.makePackage,dataPackageService.mime=dataPackageService.normalize.mime,module.exports=dataPackageService,module.exports}),System.register("common/components/editor/editor.html!github:systemjs/plugin-text@0.0.8/text.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",'<div ng-if="$ctrl.options.enableProtected && $ctrl.panel.open">\n  <alert close="closeAlert = true" type="warning" ng-hide="closeAlert">\n    This is your chance to play with the featured visualization.  No changes you make will be saved.\n  </alert>\n</div>\n\n<section id="datapckage-editor" class="datapckage-editor-container hidden-print" style="position: relative">\n\n  <div class="pull-right panel-toggle">\n    <button id="data-add" type="button" class="btn btn-link btn-sm" tooltip="Add new resource"\n      ng-show="$ctrl.options.enableAdd && $ctrl.panel.open"\n      ng-click="$ctrl.newFile()"\n      file-dropzone="{{$ctrl.options.types}}"\n      data-max-file-size="30"\n      dropped="$ctrl.dropped(file)">\n      <i class="fa fa-plus-square" aria-hidden="true"></i>\n    </button>\n\n    <button type="button" class="btn btn-primary btn-sm"\n      ng-click="$ctrl.play()"\n      ng-if="$ctrl.options.enableProtected">\n      Try your own data\n    </button>\n\n    <button id="data-drop" type="button" class="btn btn-primary btn-sm" tooltip="Add new resource"\n      ng-if="$ctrl.options.enableDrop"\n      file-dropzone="{{$ctrl.options.types}}"\n      data-max-file-size="30"\n      dropped="$ctrl.droppedOver($ctrl.data.resources.length - 1, file)">\n      Drop your own data here\n    </button>\n\n    <button id="toogle-panel" type="button" class="btn btn-link btn-sm" tooltip="Show/hide resources panel"\n      ng-show="$ctrl.options.enableOpen"\n      ng-click="$ctrl.tooglePanel()">\n      <i class="fa fa-cog" aria-hidden="true"></i>\n    </button>\n  </div>\n\n  <form name="userForm" ng-submit="$ctrl.submit(userForm)">\n    <uib-tabset id="dataPackageEditor" class="datapckage-editor-tab"\n      active="$ctrl.activeTab"\n      ng-show="$ctrl.panel.open"\n      ng-if="$ctrl.options.enableOpen || $ctrl.options.enableProtected">\n      <uib-tab ng-repeat="tab in $ctrl.resources track by $index" select="$ctrl.ui.refresh()">\n        <uib-tab-heading\n          file-dropzone="{{$ctrl.options.types}}"\n          data-max-file-size="30"\n          dropped="$ctrl.droppedOver($index, file)">\n          {{ $ctrl.resources.length < 7 ? tab.name : $index }}\n          <a class="close" ng-click="$ctrl.remove($index)">&nbsp;&times;</a>\n        </uib-tab-heading>\n        <div file-dropzone="{{$ctrl.options.types}}" data-max-file-size="30" dropped="$ctrl.droppedOver($index, file)">\n\n          <div class="col-xs-12 mini-well">\n            <div class="col-md-3">\n              <label class="sr-only">Filename</label>\n              <input type="text" id="label" class="form-control input-sm"\n                ng-model="tab.name" placeholder="filename"\n                ng-model-options="{ updateOn: \'submit\' }"\n                ng-change="$ctrl.rename(tab)">\n            </div>\n            <div class="col-md-3">\n              <label class="sr-only">Media Type</label>\n              <select class="form-control input-sm"\n                ng-options="value as value for value in $ctrl.options.types"\n                ng-model="tab.mediatype"\n                ng-model-options="{ updateOn: \'submit\' }"\n                xxx-change="$ctrl.change(tab)"></select>\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-xs-12">\n              <textarea class="editor"\n                resource="tab"\n                name="input{{$index}}"\n                ui-codemirror\n                ng-model="tab.content"\n                ng-model-options="{ updateOn: \'submit\', debounce: 200, getterSetter: false }"\n                xxx-change="$ctrl.change(tab, userForm[\'input\' + $index])"\n                ui-codemirror-opts="{\n                  lineNumbers: true,\n                  lineWrapping: false,\n                  allowDropFileTypes: false,\n                  mode: tab.format,\n                  onLoad: $ctrl.ui.codemirrorLoaded\n                }"\n                ui-refresh="$ctrl.ui.count"\n                >\n              </textarea>\n                <div class="col-xs-12 bg-danger">\n                  <ul class="list-unstyled">\n                    <li ng-repeat="error in tab.errors | limitTo:10">\n                      <span ng-if="error.row >= 0">row {{error.row}}: </span>{{error.message}}\n                    </li>\n                  </ul>\n                </div>\n            </div>\n          </div>\n        </div>\n      </uib-tab>\n    </uib-tabset>\n\n    <ng-transclude></ng-transclude>\n\n    <div class="btn-toolbar" role="toolbar" aria-label="toolbar">\n      <div id="data-download" class="btn-group" uib-dropdown>\n        <button type="button" class="btn btn-primary btn-sm dropdown-toggle" uib-dropdown-toggle aria-expanded="false" ng-if="$ctrl.options.enableFileDownload">\n          <div class="pull-right">\n            <i class="fa fa-arrow-circle-o-down" aria-hidden="true"></i>\n            Download Data <span class="caret"></span>\n          </div>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n          <li class="dropdown-header">Data Resources</li>\n          <li ng-repeat="file in $ctrl.data.resources" ng-hide="file.hide">\n            <a class="btn btn-link" file-download="file" title="{{file.description}}">{{file.name}}</a>\n          </li>\n        </ul>\n      </div>\n\n      <div id="svg-download" class="btn-group hidden-print"\n        uib-dropdown svg-download-dropdown="svgList in #charts"\n        ng-if="$ctrl.options.enableSvgDownload || $ctrl.options.enablePngDownload">\n        <button type="button" class="btn btn-primary btn-sm dropdown-toggle"\n          uib-dropdown-toggle aria-expanded="false">\n          <div class="pull-right">\n            <i class="fa fa-picture-o" aria-hidden="true"></i>\n            Download SVG <span class="caret"></span>\n          </div>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-repeat-start="svg in svgList" ng-show="$ctrl.options.enableSvgDownload">\n            <a href svg-download="#{{svg.id}}" title="{{svg.title}}">{{svg.title}} as SVG</a>\n          </li>\n          <li ng-repeat-end ng-show="$ctrl.options.canDownloadPng">\n            <a href svg-download="#{{svg.id}}" title="{{svg.title}}" type="png">{{svg.title}} as PNG</a>\n          </li>\n        </ul>\n      </div>\n\n      <div class="pull-right btn-toolbar" ng-show="$ctrl.panel.open">\n        <button type="submit" class="btn btn-primary btn-sm">Apply changes</button>\n        <button class="btn btn-danger btn-sm"\n          ng-click="$ctrl.cancel(userForm)">Cancel</button>\n      </div>\n    </div>\n  </form>\n</section>\n')}}}),System.register("common/components/editor/editor-controller.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/extends.js","mobx"],function(_export,_context){"use strict";function controller($scope,$cookies,$timeout,$log,growl,dataservice){function cancel(form){$log.debug("cancel"),form.$rollbackViewValue(),hasPackage?$ctrl.resources=$ctrl.options.data.resources.slice():$ctrl.resources=[],form.$setPristine()}function submit(form){form.$valid&&($log.debug("submit"),hasPackage&&(isObservable($ctrl.options.data.resources)?$ctrl.options.data.replaceResources($ctrl.resources):($ctrl.options.data.resources=$ctrl.resources,$ctrl.options.data.$resourcesByName=$ctrl.options.data.resourcesByName=dataservice.index($ctrl.options.data))),$timeout(function(){$ctrl.options.onChange()}))}function createNewResource(name){var content=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return name=name||"new."+$ctrl.options.defaultFormat,{path:name,name:name,mediatype:dataservice.mime.lookup(name),content:content,schema:$ctrl.options.defaultSchema}}function fileDroppedOver($index,file){$log.debug("fileDroppedOver",$index,file);var resource=createNewResource(file.name,file.content);$ctrl.activeTab=$index,$ctrl.resources[$index]=resource,$ctrl.ui.refresh()}function fileDropped(file){$log.debug("fileDropped",file),addResource(file.name,file.content)}function addResource(name){var content=arguments.length<=1||void 0===arguments[1]?"":arguments[1];$log.debug("addResource",name,content);var resource=createNewResource(name,content);return $ctrl.resources.push(resource),$timeout(function(){$ctrl.ui.refresh(),$ctrl.activeTab=$ctrl.resources.length-1}),!1}function play(){tooglePanel()}function removeResourceByIndex(i){i>-1&&$ctrl.resources.splice(i,1)}function tooglePanel(){$ctrl.panel.open=!$ctrl.panel.open,$ctrl.ui.refresh(),$timeout($ctrl.ui.refresh,100)}var $ctrl=this,hasOptions=Boolean($ctrl.options),hasPackage=hasOptions&&Boolean($ctrl.options.data),hasResources=hasPackage&&$ctrl.options.data.resources.length>0,isSafari=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),isIE="undefined"!=typeof window.navigator.msSaveBlob,enableFileDownload=hasPackage&&hasResources;return Object.assign($ctrl.options,_extends({enableOpen:hasPackage,enableFileDownload:enableFileDownload,enableSvgDownload:!0,enablePngDownload:!isSafari&&!isIE,enableAdd:!0,enableDrop:!1,enableProtected:!1,types:Object.keys(dataservice.translators),defaultFormat:hasResources?$ctrl.options.data.resources[0].format:"txt",defaultSchema:hasResources?$ctrl.options.data.resources[0].schema:void 0,onChange:function(){}},$ctrl.options)),Object.assign($ctrl,{activeTab:0,resources:hasResources?$ctrl.options.data.resources.slice():[],panel:{open:!1},remove:removeResourceByIndex,newFile:addResource,dropped:fileDropped,droppedOver:fileDroppedOver,submit:submit,cancel:cancel,tooglePanel:tooglePanel,play:play,ui:{refresh:function(){$ctrl.ui.count++},count:0,codemirrorLoaded:function(cm){$timeout(function(){cm.refresh(),$ctrl.ui.refresh()},100)}}})}var _extends,isObservable;return _export("default",controller),{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0012BabelHelpersExtendsJs.default},function(_mobx){isObservable=_mobx.isObservable}],execute:function(){controller.$inject=["$scope","$cookies","$timeout","$log","growl","dataService"]}}}),System.register("common/components/editor/editor.js",["angular","ui-codemirror","codemirror/lib/codemirror","codemirror/lib/codemirror.css!","./editor.less!","common/directives/svg-download-dropdown","common/directives/file-drop","common/directives/file-download","common/services/datapackage/index","common/services/datapackage/datapackage","./editor.html!text","./editor-controller"],function(_export,_context){"use strict";var angular,svgDropdownDownload,fileDrop,fileDownload,dataServices,template,controller,editor;return{setters:[function(_angular){angular=_angular.default},function(_uiCodemirror){},function(_codemirrorLibCodemirror){},function(_codemirrorLibCodemirrorCss){},function(_editorLess){},function(_commonDirectivesSvgDownloadDropdown){svgDropdownDownload=_commonDirectivesSvgDownloadDropdown.default},function(_commonDirectivesFileDrop){fileDrop=_commonDirectivesFileDrop.default},function(_commonDirectivesFileDownload){fileDownload=_commonDirectivesFileDownload.default},function(_commonServicesDatapackageIndex){dataServices=_commonServicesDatapackageIndex.default},function(_commonServicesDatapackageDatapackage){},function(_editorHtmlText){template=_editorHtmlText.default},function(_editorController){controller=_editorController.default}],execute:function(){editor=angular.module("projectX.dataEditor",["ui.codemirror",dataServices,svgDropdownDownload,fileDrop,fileDownload]).directive("datapackageEdit",function(){return{restrict:"A",scope:{},bindToController:{options:"=datapackageEdit"},controller:controller,controllerAs:"$ctrl",transclude:!0,template:template}}).component("packageEditor",{template:template,controller:controller,transclude:!0,bindings:{options:"="}}),_export("default",editor.name)}}}),System.register("common/services/loading-bar/loading-bar.html!github:systemjs/plugin-text@0.0.8/text.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",'<div id="loading-bar-spinner" class="text-center">\n  <div class="spinner-box">\n    <div class="spinner-icon"></div>\n  </div>\n</div>\n')}}}),System.register("common/services/loading-bar/loading-bar.js",["angular","angular-loading-bar","angular-loading-bar/build/loading-bar.css!","./loading-bar.less!","./loading-bar.html!text"],function(_export,_context){"use strict";var angular,spinnerTemplate,mod;return{setters:[function(_angular){angular=_angular.default},function(_angularLoadingBar){},function(_angularLoadingBarBuildLoadingBarCss){},function(_loadingBarLess){},function(_loadingBarHtmlText){spinnerTemplate=_loadingBarHtmlText.default}],execute:function(){mod=angular.module("projectX.loading-bar",["angular-loading-bar"]).config(["cfpLoadingBarProvider",function(cfpLoadingBarProvider){cfpLoadingBarProvider.latencyThreshold=32,cfpLoadingBarProvider.spinnerTemplate=spinnerTemplate}]).run(["$rootScope","cfpLoadingBar",function($rootScope,cfpLoadingBar){$rootScope.$on("$routeChangeStart",function(){cfpLoadingBar.start()}),$rootScope.$on("$routeChangeError",function(){cfpLoadingBar.complete()}),$rootScope.$on("$routeChangeSuccess",function(){cfpLoadingBar.complete()})}]),_export("default",mod.name)}}}),System.register("common/services/dynamic-title/dynamic-title.js",["angular"],function(_export,_context){"use strict";function setupRouteChange($rootScope,dynamicTitle){$rootScope.$on("$routeChangeSuccess",function(event,current){return dynamicTitle.fromState(current)})}function DynamicTitleProvider(){function DynamicTitle($document,$log){function set(title){title=title||configuration.defaultTitle,$log.debug("title set to",title),$document[0].title=title}return{set:set,fromState:function($state){var value=null;$state.$$route&&$state.$$route.title&&(value="function"==typeof $state.$$route.title?$state.$$route.title($state.params):$state.$$route.title),set(value)}}}var configuration={defaultTitle:document.title||"Project-χ"};this.configure=function(value){angular.extend(configuration,value)},this.$get=DynamicTitle,DynamicTitle.$inject=["$document","$log"]}var angular,module;return{setters:[function(_angular){angular=_angular.default}],execute:function(){module=angular.module(name,[]).provider("dynamicTitle",DynamicTitleProvider).run(setupRouteChange),_export("default",module.name),setupRouteChange.$inject=["$rootScope","dynamicTitle"],DynamicTitleProvider.$inject=[]}}}),System.register("common/services/growl/growl.js",["angular-growl/build/angular-growl.js","angular-growl/build/angular-growl.css!","angular"],function(_export,_context){"use strict";function runGrowl($rootScope,$location,growl){$rootScope.$on("$routeChangeError",function(event,curr,prev,rej){return"string"!=typeof rej&&(rej=rej.status&&rej.statusText?rej.status+" "+rej.statusText:rej.message?rej.message:String(rej)),growl.error(rej,{title:"Failed to change routes"})})}var angular,mod;return{setters:[function(_angularGrowlBuildAngularGrowlJs){},function(_angularGrowlBuildAngularGrowlCss){},function(_angular){angular=_angular.default}],execute:function(){mod=angular.module("projectX.growl",["angular-growl"]).run(runGrowl),_export("default",mod.name),runGrowl.$inject=["$rootScope","$location","growl"]}}}),System.register("common/directives/resize.js",["angular"],function(_export,_context){"use strict";function onResize($window,$timeout){return{scope:{onResize:"&"},link:function(scope){function debounceRedraw(){timeout&&$timeout.cancel(timeout),timeout=$timeout(function(){scope.onResize()},500)}function resize(){scope.onResize()}var timeout=null;angular.element($window).on("resize",debounceRedraw),"matchMedia"in window&&window.matchMedia("print").addListener(resize),scope.$on("$destroy",function(){angular.element($window).off("resize",debounceRedraw),"matchMedia"in window&&window.matchMedia("print").removeListener(resize)})}}}var angular,module;return{setters:[function(_angular){angular=_angular.default}],execute:function(){module=angular.module("projectX.onResize",[]).directive("onResize",onResize),_export("default",module.name),onResize.$inject=["$window","$timeout"]}}}),System.register("common/directives/active-path.js",["angular"],function(_export,_context){"use strict";function activePathDirective($log,$location){return{link:function(scope,element,attrs){var re=new RegExp(attrs.activePath);scope.$watch(function(){return $location.path()},function(value){re.test(value)?element.addClass("active"):element.removeClass("active")})}}}var angular,activePath;return{setters:[function(_angular){angular=_angular.default}],execute:function(){activePath=angular.module("projectX.activePath",[]).directive("activePath",activePathDirective),_export("default",activePath.name),activePathDirective.$inject=["$log","$location"]}}}),System.register("common/common.js",["angular","common/services/datapackage/index","common/components/editor/editor","common/services/loading-bar/loading-bar","common/services/dynamic-title/dynamic-title","common/services/growl/growl","common/directives/resize","common/directives/active-path"],function(_export,_context){"use strict";var angular,dataServices,dataPackageEditor,loadingBar,dynamicTitle,growl,onResize,activePath,common;return{setters:[function(_angular){angular=_angular.default},function(_commonServicesDatapackageIndex){dataServices=_commonServicesDatapackageIndex.default},function(_commonComponentsEditorEditor){dataPackageEditor=_commonComponentsEditorEditor.default},function(_commonServicesLoadingBarLoadingBar){loadingBar=_commonServicesLoadingBarLoadingBar.default},function(_commonServicesDynamicTitleDynamicTitle){dynamicTitle=_commonServicesDynamicTitleDynamicTitle.default},function(_commonServicesGrowlGrowl){growl=_commonServicesGrowlGrowl.default},function(_commonDirectivesResize){onResize=_commonDirectivesResize.default},function(_commonDirectivesActivePath){activePath=_commonDirectivesActivePath.default}],execute:function(){common=angular.module("projectX.common",[dataServices,dataPackageEditor,onResize,loadingBar,dynamicTitle,growl,activePath]),_export("default",common.name)}}}),System.register("common/partials/footer.html!github:systemjs/plugin-text@0.0.8/text.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",'<div class="container">\n\t<p>Website designed and built at RIKEN, Japan.</p>\n\t<p>Project-χ code licensed under MIT</p>\n\t<p>Currently 1.0.0-rc.14\n\t\t// <a href="https://github.com/Hypercubed/Project-chi">GitHub</a>\n\t\t// <a ng-href="#/about">About</a>\n\t\t// <a href="https://github.com/Hypercubed/Project-Chi/issues">Issues</a></p>\n</div>\n');
}}}),System.register("common/partials/header.html!github:systemjs/plugin-text@0.0.8/text.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",'<div class="header">\n\t<div class="navbar navbar-default" role="navigation">\n\t\t<div class="container">\n\t\t\t<div class="navbar-header">\n\n\t\t\t\t<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse">\n\t\t\t\t\t<span class="sr-only">Toggle navigation</span>\n\t\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t</button>\n\n\t\t\t\t<a class="navbar-brand" href="#/">Project-χ</a>\n\t\t\t</div>\n\n\t\t\t<div class="collapse navbar-collapse pull-right" id="js-navbar-collapse">\n\t\t\t\t<ul class="nav navbar-nav">\n\t\t\t\t\t<li active-path="/about"><a ng-href="#/about">About</a></li>\n\t\t\t\t\t<li><a href="//github.com/Hypercubed/Project-Chi/issues">Contact</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}}}),System.register("components/app.component.js",["common/partials/footer.html!text","common/partials/header.html!text"],function(_export,_context){"use strict";var footerHTML,headerHTML,AppComponent;return{setters:[function(_commonPartialsFooterHtmlText){footerHTML=_commonPartialsFooterHtmlText.default},function(_commonPartialsHeaderHtmlText){headerHTML=_commonPartialsHeaderHtmlText.default}],execute:function(){AppComponent={template:'\n    <div class="header">\n      '+headerHTML+'\n    </div>\n\n    <div class="container">\n      <div ng-view autoscroll class="ng-fade"></div>\n    </div>\n\n    <div class="footer">\n      '+footerHTML+"\n    </div>\n\n    <div growl></div>"},_export("default",AppComponent)}}}),System.register("components/app.js",["./app.css!","angular","angular-route","angular-animate","angular-cookies","angular-sanitize","angular-touch","angular-ui-bootstrap","angular-marked","components/routes","common/common","./app.component"],function(_export,_context){"use strict";var angular,angularMarked,routes,common,AppComponent;return{setters:[function(_appCss){},function(_angular){angular=_angular.default},function(_angularRoute){},function(_angularAnimate){},function(_angularCookies){},function(_angularSanitize){},function(_angularTouch){},function(_angularUiBootstrap){},function(_angularMarked){angularMarked=_angularMarked.default},function(_componentsRoutes){routes=_componentsRoutes.default},function(_commonCommon){common=_commonCommon.default},function(_appComponent){AppComponent=_appComponent.default}],execute:function(){_export("default",angular.module("projectX",["ngRoute","ngAnimate","ngCookies","ngSanitize","ngTouch","ui.bootstrap",angularMarked,routes.name||routes,common]).component("app",AppComponent).config(["$logProvider","$compileProvider",function($logProvider,$compileProvider){$logProvider.debugEnabled(!System.production),$compileProvider.debugInfoEnabled(!System.production)}]).config(["$animateProvider",function($animateProvider){$animateProvider.classNameFilter(/ng-animate-enabled/)}]))}}}),System.register("components/boot.js",["webcomponentsjs/webcomponents-lite.js","core-js/client/shim","FileSaver/FileSaver.js","bootstrap/less/bootstrap.less!","font-awesome/less/font-awesome.less!","angular","./app"],function(_export,_context){"use strict";var saveAs,angular,app;return{setters:[function(_webcomponentsjsWebcomponentsLiteJs){},function(_coreJsClientShim){},function(_FileSaverFileSaverJs){saveAs=_FileSaverFileSaverJs.default},function(_bootstrapLessBootstrapLess){},function(_fontAwesomeLessFontAwesomeLess){},function(_angular){angular=_angular.default},function(_app){app=_app.default}],execute:function(){window.saveAs=saveAs,angular.element(document).ready(function(){angular.bootstrap(document.body,[app.name],{strictDi:!0})})}}});
//# sourceMappingURL=app-bundle.js.map